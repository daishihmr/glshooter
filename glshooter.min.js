/*
 glshooter v1.5-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
function c(a){throw a;}var d=void 0,h=!0,j=null,k=!1;function da(){return function(){}}var l;/*
 bulletml.js v0.5.0-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
var n={Vc:this};function ea(a,b){for(var f=0,q=a.length;f<q;f++)if(a[f].label==b)return a[f]}n.Xb=function(a){this.type="none";this.root=this;this.la=[];this.Fb=[];this.Lb=[];if(a!==d){for(var b in a)a.hasOwnProperty(b)&&(a[b].label=b,a[b]instanceof n.wa?this.la.push(a[b]):a[b]instanceof n.La?this.Fb.push(a[b]):a[b]instanceof n.Za&&this.Lb.push(a[b]));a=0;for(b=this.la.length;a<b;a++)this.la[a].xa(this);a=0;for(b=this.Fb.length;a<b;a++)this.Fb[a].xa(this);a=0;for(b=this.Lb.length;a<b;a++)this.Lb[a].xa(this)}};
l=n.Xb.prototype;l.Jc=function(a){return ea(this.la,a)};l.Ad=function(){for(var a=[],b=0,f=this.la.length;b<f;b++){var q=this.la[b];q.label&&0===q.label.indexOf("top")&&(a[a.length]=q.label)}return a};l.pd=function(a){var b;if(b=this.Jc(a))return b;c(Error("action labeled '"+a+"' is undefined."))};l.qd=function(a){return ea(this.Fb,a)};l.rd=function(a){var b;if(b=this.qd(a))return b;c(Error("bullet labeled '"+a+"' is undefined."))};l.sd=function(a){return ea(this.Lb,a)};
l.td=function(a){var b;if(b=this.sd(a))return b;c(Error("fire labeled '"+a+"' is undefined."))};n.La=function(){this.root=this.label=j;this.direction=new n.Fa(0);this.speed=new n.Ga(1);this.la=[];this.qa={};this.ca={}};n.La.prototype.clone=function(a){var b=new n.La;b.label=this.label;b.root=this.root;b.la=this.la;b.direction=new n.Fa(a.pa(this.direction.value));b.direction.type=this.direction.type;b.speed=new n.Ga(a.pa(this.speed.value));b.speed.type=this.speed.type;b.qa=this.qa;b.ca=a.ca;return b};
n.La.prototype.xa=function(a){this.root=a;for(var b=0,f=this.la.length;b<f;b++)this.la[b].xa(a)};n.wb=function(a){this.root=j;this.label=a;this.ua=[]};n.wb.prototype.clone=function(a){var b=a.ca;a.ca=a.ac(this.ua);var f=this.root.rd(this.label).clone(a);a.ca=b;return f};n.wb.prototype.xa=function(a){this.root=a};n.ka=function(){this.sa=""};n.ka.prototype.xa=function(a){this.root=a};n.wa=function(){this.sa="action";this.root=this.label=j;this.ya=[];this.ua=[]};n.wa.prototype=new n.ka;
n.wa.prototype.xa=function(a){this.root=a;for(var b=0,f=this.ya.length;b<f;b++)this.ya[b].xa(a)};n.wa.prototype.clone=function(){var a=new n.wa;a.label=this.label;a.root=this.root;a.ya=this.ya;return a};n.Ya=function(a){this.sa="actionRef";this.label=a;this.root=j;this.ua=[]};n.Ya.prototype=new n.ka;n.Ya.prototype.clone=function(){var a=new n.wa;a.root=this.root;a.ya.push(this);return a};n.Za=function(){this.sa="fire";this.na=this.speed=this.direction=this.root=this.label=j;this.qa=new n.Tb};
n.Za.prototype=new n.ka;n.Za.prototype.xa=function(a){this.root=a;this.na&&this.na.xa(a)};n.Ub=function(a){this.sa="fireRef";this.label=a;this.ua=[]};n.Ub.prototype=new n.ka;n.xb=function(){this.sa="changeDirection";this.direction=new n.Fa;this.ra=0};n.xb.prototype=new n.ka;n.yb=function(){this.sa="changeSpeed";this.speed=new n.Ga;this.ra=0};n.yb.prototype=new n.ka;n.vb=function(){this.sa="accel";this.Ca=new n.Vb;this.Da=new n.Zb;this.ra=0};n.vb.prototype=new n.ka;
n.Ab=function(a){this.sa="wait";this.value=a||0};n.Ab.prototype=new n.ka;n.Yb=function(){this.sa="vanish"};n.Yb.prototype=new n.ka;n.zb=function(){this.sa="repeat";this.Rc=0;this.action=j;this.ua=[]};n.zb.prototype=new n.ka;n.zb.prototype.xa=function(a){this.root=a;this.action&&this.action.xa(a)};n.Sb=function(a,b){this.sa="bind";this.Kd=a;this.od=b};n.Sb.prototype=new n.ka;n.Wb=function(a,b){this.sa="notify";this.Rd=a;this.ua=b||j};n.Wb.prototype=new n.ka;n.Uc=new n.ka;
n.Fa=function(a){this.type="aim";this.value=a||0};n.Ga=function(a){this.type="absolute";this.value=a===d?1:a};n.Vb=function(a){this.type="absolute";this.value=a||0};n.Zb=function(a){this.type="absolute";this.value=a||0};n.Tb=function(a){a=a||{};this.offsetX=a.offsetX||0;this.offsetY=a.offsetY||0;this.$a=h;a.$a!==d&&(this.$a=!!a.$a)};n.xc=function(a){this.value=a||0};n.yc=function(a){this.value=a||0};n.wc=function(a){this.value=!!a};n.ba=function(a){a=a||"";for(var b in n.ba)n.ba.hasOwnProperty(b)&&(n.Vc[a+b]=n.ba[b])};
n.ba.action=function(a){if(0<arguments.length)for(var b=0,f=arguments.length;b<f;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());if(a instanceof Array){b=0;for(f=a.length;b<f;b++)a[b]instanceof Function&&(a[b]=a[b]())}var q=new n.wa;if(a instanceof Array)a.some(function(a){return!(a instanceof n.ka)})&&c(Error("argument type error.")),q.ya=a;else{b=0;for(f=arguments.length;b<f;b++)arguments[b]instanceof n.ka?q.ya[b]=arguments[b]:c(Error("argument type error."))}return q};
n.ba.bd=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("label is required."));q=new n.Ya(a);if(b instanceof Array)q.ua=b;else for(f=1;f<arguments.length;f++)q.ua.push(arguments[f]);return q};
n.ba.na=function(a,b,f,q){for(var m=0,p=arguments.length;m<p;m++)arguments[m]instanceof Function&&(arguments[m]=arguments[m]());p=new n.La;for(m=0;m<arguments.length;m++)arguments[m]instanceof n.Fa?p.direction=arguments[m]:arguments[m]instanceof n.Ga?p.speed=arguments[m]:arguments[m]instanceof n.wa?p.la.push(arguments[m]):arguments[m]instanceof n.Ya?p.la.push(arguments[m]):arguments[m]instanceof Array?p.la.push(n.ba.action(arguments[m])):arguments[m]instanceof Object?p.qa=arguments[m]:"string"===
typeof arguments[m]&&(p.label=arguments[m]);return p};n.ba.cd=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("label is required."));q=new n.wb(a);if(b instanceof Array)q.ua=b;else for(f=1;f<arguments.length;f++)q.ua.push(arguments[f]);return q};
n.ba.ud=function(a,b,f,q){for(var m=0,p=arguments.length;m<p;m++)arguments[m]instanceof Function&&(arguments[m]=arguments[m]());p=new n.Za;for(m=0;m<arguments.length;m++)arguments[m]instanceof n.Fa?p.direction=arguments[m]:arguments[m]instanceof n.Ga?p.speed=arguments[m]:arguments[m]instanceof n.La?p.na=arguments[m]:arguments[m]instanceof n.wb?p.na=arguments[m]:arguments[m]instanceof n.Tb?p.qa=arguments[m]:arguments[m]instanceof n.xc?p.qa.offsetX=arguments[m].value:arguments[m]instanceof n.yc?p.qa.offsetY=
arguments[m].value:arguments[m]instanceof n.wc&&(p.qa.$a=arguments[m].value);p.na===d&&c(Error("bullet (or bulletRef) is required."));return p};n.ba.Td=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("label is required."));q=new n.Ub(a);if(b instanceof Array)q.ua=b;else for(f=1;f<arguments.length;f++)q.ua.push(arguments[f]);return q};
n.ba.dd=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("direction is required."));b===d&&c(Error("term is required."));f=new n.xb;f.direction=a instanceof n.Fa?a:new n.Fa(a);f.ra=b;return f};
n.ba.ed=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("speed is required."));b===d&&c(Error("term is required."));f=new n.yb;f.speed=a instanceof n.Ga?a:new n.Ga(a);f.ra=b;return f};
n.ba.Od=function(a,b,f){for(var q=0,m=arguments.length;q<m;q++)arguments[q]instanceof Function&&(arguments[q]=arguments[q]());m=new n.vb;for(q=0;q<arguments.length;q++)arguments[q]instanceof n.Vb?m.Ca=a:arguments[q]instanceof n.Zb?m.Da=b:m.ra=arguments[q];m.Ca===d&&m.Da===d&&c(Error("horizontal or vertical is required."));m.ra===d&&c(Error("term is required."));return m};
n.ba.Ld=function(a){for(var b=0,f=arguments.length;b<f;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());a===d&&c(Error("value is required."));return new n.Ab(a)};n.ba.Jd=function(){return new n.Yb};
n.ba.repeat=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("times is required."));b===d&&c(Error("action is required."));q=new n.zb;q.Rc=a;if(b instanceof n.wa||b instanceof n.Ya)q.action=b;else if(b instanceof Array)q.action=n.ba.action(b);else{for(var m=[],f=1;f<arguments.length;f++)m.push(arguments[f]);q.action=n.ba.action(m)}return q};n.ba.Pd=function(a,b){return new n.Sb(a,b)};
n.ba.Yd=function(a,b){return new n.Wb(a,b)};n.ba.direction=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("value is required."));f=new n.Fa(a);b!==d&&(f.type=b);return f};n.ba.speed=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("value is required."));f=new n.Ga(a);b&&(f.type=b);return f};
n.ba.Ca=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("value is required."));f=new n.Vb(a);b&&(f.type=b);return f};n.ba.Da=function(a,b){for(var f=0,q=arguments.length;f<q;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());a===d&&c(Error("value is required."));f=new n.Zb(a);b&&(f.type=b);return f};n.ba.Sd=function(a){return new n.Tb(a)};n.ba.offsetX=function(a){return new n.xc(a)};n.ba.offsetY=function(a){return new n.yc(a)};
n.ba.$a=function(a){return new n.wc(a)};window.bulletml_temp=da();
(function(){n.Ma=function(a,b){this.Bc=a;this.Db=[];this.Na=-1;this.oa=j;this.ca={};this.Bb={$rank:b||0}};n.Ma.prototype.next=function(){this.Na+=1;if(this.oa!==j){var a=this.oa.ya[this.Na];if(a!==d){if(a instanceof n.wa)return this.hb(),this.oa=a,this.ca=this.$b(),this.next();if(a instanceof n.Ya)return this.hb(),this.oa=this.Bc.pd(a.label),this.ca=this.ac(a.ua),this.next();if(a instanceof n.zb)return this.ca.cb=0,this.ca.Oc=this.pa(a.Rc)|0,this.hb(),this.oa=a.action.clone(),this.ca=this.$b(),this.next();
if(a instanceof n.Za){var b=new n.Za;b.na=a.na.clone(this);a.direction!==j&&(b.direction=new n.Fa(this.pa(a.direction.value)),b.direction.type=a.direction.type);a.speed!==j&&(b.speed=new n.Ga(this.pa(a.speed.value)),b.speed.type=a.speed.type);b.qa=a.qa;return b}return a instanceof n.Ub?(this.hb(),this.oa=new n.wa,this.oa.ya=[this.Bc.td(a.label)],this.ca=this.ac(a.ua),this.next()):a instanceof n.xb?(b=new n.xb,b.direction.type=a.direction.type,b.direction.value=this.pa(a.direction.value),b.ra=this.pa(a.ra),
b):a instanceof n.yb?(b=new n.yb,b.speed.type=a.speed.type,b.speed.value=this.pa(a.speed.value),b.ra=this.pa(a.ra),b):a instanceof n.vb?(b=new n.vb,b.Ca.type=a.Ca.type,b.Ca.value=this.pa(a.Ca.value),b.Da.type=a.Da.type,b.Da.value=this.pa(a.Da.value),b.ra=this.pa(a.ra),b):a instanceof n.Ab?new n.Ab(this.pa(a.value)):a instanceof n.Yb?a:a instanceof n.Sb?(this.ca["$"+a.Kd]=this.pa(a.od),n.Uc):a instanceof n.Wb?a:j}this.ad();if(this.oa===j)return j;if((a=this.oa.ya[this.Na])&&"repeat"==a.sa)this.ca.cb++,
this.ca.cb<this.ca.Oc&&(this.hb(),this.oa=a.action.clone(),this.ca=this.$b());return this.next()}return j};n.Ma.prototype.hb=function(){this.Db.push({action:this.oa,cursor:this.Na,scope:this.ca});this.Na=-1};n.Ma.prototype.ad=function(){var a=this.Db.pop();a?(this.Na=a.cursor,this.oa=a.action,this.ca=a.scope):(this.Na=-1,this.oa=j,this.ca={})};n.Ma.prototype.pa=function(a){var b;if("number"===typeof a)return a;if(isNaN(b=Number(a))){if((b=this.ca[a])||(b=this.Bb[a]))return b;if("$rand"==a)return Math.random()}else return b;
b={};for(var f in this.Bb)this.Bb.hasOwnProperty(f)&&(b[f]=this.Bb[f]);for(f in this.ca)this.ca.hasOwnProperty(f)&&(b[f]=this.ca[f]);b.$rand=Math.random();(f=this.Db[this.Db.length-1])&&(b.$loop={index:f.scope.cb,count:f.scope.cb+1,first:0===f.scope.cb,last:f.scope.cb+1>=f.scope.Oc});return eval("bulletml_temp = function() { return "+a.split("$").join("this.$")+"}").bind(b)()};n.Ma.prototype.ac=function(a){var b={};if(a)for(var f=0,q=a.length;f<q;f++)b["$"+(f+1)]=this.pa(a[f]);else for(f in this.ca)this.ca.hasOwnProperty(f)&&
(b[f]=this.ca[f]);return b};n.Ma.prototype.$b=function(){var a={},b;for(b in this.ca)this.ca.hasOwnProperty(b)&&(a[b]=this.ca[b]);return a};n.Xb.prototype.lc=function(a,b){var f=new n.Ma(this,b),q=this.Jc(a);q&&(f.oa=q);return f};n.La.prototype.lc=function(a){a=new n.Ma(this.root,a);var b=new n.wa;b.root=this.root;b.ya=this.la;a.oa=b;a.ca=this.ca;return a}})();var fa,r,pa,qa;fa=function(a){this.canvas=a;this.Ib=a.getContext("2d");this.children=[];this.Cb=[];this.frame=0;this.update=da();this.ld()};l=fa.prototype;l._update=function(){this.update();for(var a=this.children,b=this.Cb,f=0,q=a.length;f<q;f++)a[f]._update();f=0;for(q=b.length;f<q;f++){var m=this.children.indexOf(b[f]);-1!=m&&a.splice(m,1)}this.Cb=[];this.frame++};
l._draw=function(){var a=this.children,b=this.Ib;this.clear();b.scale=this.canvas.width/32;b.globalCompositeOperation="lighter";for(var f=0,q=a.length;f<q;f++)a[f]._draw(this.canvas,b)};l.clear=function(){this.Ib.globalCompositeOperation="copy";this.Ib.fillStyle="rgba(0,0,0,0.2)";this.Ib.fillRect(0,0,this.canvas.width,this.canvas.height)};l.addChild=function(a){var b=this.children;b[b.length]=a;a.parent=this;a.be=this.ae};
l.removeChild=function(a){a.parent===this&&(a.parent=j,this.Cb[this.Cb.length]=a,a.qb())};l.ld=function(){r.Mb=new Image;r.Mb.src=ra};r=function(a){this.fa=0;this.parent=j;this.y=this.x=0;this.scaleY=this.scaleX=1;this.ea=this.da=this.rotation=0;this.sb=1;this.visible=h;this.alpha=1;this.va=0;this.tb=j;a&&(this.tb=a);this.update=da();this.qb=da()};r.prototype._update=function(){this.update();this.fa+=1};
r.prototype._draw=function(a,b){if(this.visible){var f=(this.x+16)*b.scale,q=(24-this.y)*b.scale,m=2*this.scaleX*b.scale,p=2*this.scaleY*b.scale;this.tb!=j&&(b.save(),b.globalAlpha=this.alpha,b.translate(f,q),b.rotate(this.rotation*Math.DEG_TO_RAD),b.drawImage(this.tb,64*this.da,64*this.ea,64*this.sb,64*this.sb,0.5*-m,0.5*-p,m,p),0<this.va&&(m*=2,p*=2,b.globalAlpha=0.5*this.va,b.drawImage(r.Mb,0.5*-m,0.5*-p,m,p)),b.restore())}};
pa=function(a){a.style.position="absolute";a.style.top=0;a.style.left=0;window.innerWidth/window.innerHeight<2/3?(a.width=window.innerWidth,a.height=3*window.innerWidth/2):(a.height=window.innerHeight,a.width=2*window.innerHeight/3)};qa=function(a,b){var f=document.createElement("canvas");f.width=512;f.height=512;a=f.getContext("2d");a.drawImage(b,0,0,512,512);return f};var ra="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFa0lEQVR4Xu2biXLbMAxE697//7VJerhcBatZrQGSvtLGqmY0suW09j4uAF46fHjD43g8HtrX8cy++dhuHg+HA65vcuDH3O1ogj+2/1zPKQCA0M7fPBsQvL7LcXMAIfpT+7U4XTzeDx0QwjcQ2r1fOG8N42YAmnAI/hzCKV4h4LsuBQDxcMECoZ0/Gwhcrz6uBmDCFYA7gG6YdcAaAiZ+AXArEBcDiIT2JVodwl38KAyy1qPtU/uLAwgBIHD+uDRxXgQgWh3iMwCzYTAL4MT+bP0QvwAICGeHxdkAmngKp3iF4HnAXcA8APH+3Sx9sL46gHG/xr8BgHiFgPfTxzQAsbwCmIEwWwqXPoCJZx6YEk8nnBMSUwBC/NewvANwCJkLZvoCFQB1wJr8Quza8io+Xr/M5IUhABNPCAoDMa8QFAA+g3gvh1klyAAw/lU47qntFcILxc9CmAEAsXpCbOYGVgK9ag4ghKo36ACy5Mesv2Z/a3kFgNdwAa7l0QUQCc8BZC7IKkKvT9BzgNZ/t78CWDK/nCfiASAglImxBBCl7pu0Pl/TAVVOcCdU/YGsClT1f9TyELiIlRB4lnvPVc8xBRBxD8EZAA8HDQnNB1nnqNcb9ApQtb7GPwUrAILYAGhaAOFklFkBgEiK9+tMTshcoMlwFAIa/73WL20PweGA9ZrlgxMAYn11wAjCKClWYaDJacb+WdyzxfV6Ij6AnIRCBoDC9UpHVCExqgwE4OWwApDZf5T0TiwvDsBny9lcgOt6bABI63+PEOhBUBgMi14+yLrFIwBa7ljvK9trq/trAngKCOuYwQFkra8w3AkZBA+HKhlmVUDH/Dri83Lntu+JX0TrqS5Yf0TM5KjYzAVVeGjSzMJBIWi3WB3g9T/r7JRlzkUm7xXEE2eWFAB+eAZgBoQC0HDwkaOHQQZABz69pFfZfNPa7Qso3AEsnSMFQKHVFa3fg5FBYDiwf8BxAl2QAWC/3+t9leVdMN5vxIYbNiCaA/D+FYDYPxPv92ZAEIaHg3aPtS/ATlDW+rR9luWr1lYIEOouWO4hDAgAPwxCVay/V+EZlKxiZOGgYUAHsg9AAFnS61k+E5hB0L8DgJ8EgB86AuBw3AkeHh4SPmDiDPFiwnYiCXri826ttnhl841Isb87AQBeCCBr+XOAZO7wsQTdoBVBHaBlLytzm1pe2bonOP7NCgJ54BADH4qtROvnFJv9beUKL5OEoAC09QFALT/b2t76FHvS+oQBALCiA+gJHsFSQFW/gTNI+G4ctD9HdVVmzwQy1l1sKVqdAABIShUAb+0eqFHIeJIEBHw3Dk5zseUzu08JMpsP/80IwIzgc92jIBAKOGB/T3DaoqNWrlp/eP/eAEYAAQPH3QQWjljB/AcwyAGjFhx9nuWQdxUCu0iCuy+D6IyMavvjdoSQglse2G9XOADsfjC0++GwJkIf2T3+hEiSB6rh7WNOiQWA3U+KMgzYU+u1to/s3v+0eLhgvwsjAQDj82rWd2ZV6H0vjXVcsI/FUXOBTmpyDbBaC3yc5XHpGbro3kJotSDqa4K+USrmQ5aL7hD5exskAgAGSD6tnQHgXL8vgWU7xbKtchWAapWYS+S+VH7bLTIWCpzPJ4DH3yTFZtn1NjmBMLMpyneN+6aIbINUtU1O1wk3D0nE7PFZewWv2igp+cA3R2rSe+ytsgmEfW2WllCAZUfiuf7vD01cs1vcw8D3DqU7xmd2ikPbcLO01ikZNepS9z4emNgU7Nf1xH0+MpOERNXpedyHphI3ZLH/2I/NJblhnw9OJiDY6dnXo7MOIirG7BNja2qxUeGye/TWzwvrbz27DGZCZ+/9i4/P/wHZcraVmgBTvQAAAABJRU5ErkJggg==";(function(){function a(a){for(;a<=-Math.PI;)a+=2*Math.PI;for(;Math.PI<a;)a-=2*Math.PI;return a}function b(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}n.Md=da();n.Tc=function(){this.Dc=function(){return j};this.nc=function(){return h};this.$d=da();this.rc=0.5;this.uc=k;this.Xa=2;this.target=j};n.Ka=function(a){this.zc=a};n.Ka.prototype.ic=function(a,b){var g=this.zc.Ad();if(b===d&&0<g.length){for(var f=[],q=0,U=g.length;q<U;q++)f[f.length]=this.Ac(a,g[q]);for(var G=function(){for(var a=f.length;a--;)f[a].call(this);
G.gc===f.length&&(G.complete=h,this.Va&&this.Va())},q=f.length;q--;)f[q].eb=G;G.gc=0;G.hc=function(){this.gc++};G.gc=0;G.complete=k;G.mc=h;return G}return this.Ac(a,b)};n.Ka.prototype.Ac=function(a,b){function g(){if(g.Sa)if(this.fa<g.Gb?g.direction+=g.Ua:this.fa===g.Gb&&(g.direction=g.Ia),this.fa<g.Hb?g.speed+=g.gb:this.fa===g.Hb&&(g.speed=g.Wa),this.fa<g.Eb?(g.Pa+=g.kb,g.Qa+=g.lb):this.fa===g.Eb&&(g.Pa=g.ib,g.Qa=g.jb),this.x+=Math.cos(g.direction)*g.speed*g.za.Xa,this.y+=Math.sin(g.direction)*g.speed*
g.za.Xa,this.x+=g.Pa*g.za.Xa,this.y+=g.Qa*g.za.Xa,g.za.nc(this)){if(g.za.uc&&(this.direction=(g.direction+0.5*Math.PI)*f,this.speed=g.speed),!(this.fa<g.vc||g.mb)){for(var a;a=g.Sc.next();)switch(a.sa){case "fire":g.Sa.$c.call(this,a,g.za,g,g.Sa);break;case "wait":var b=0;g.vc="number"===typeof a.value?this.fa+a.value:0!==(b=~~a.value)?this.fa+b:this.fa+eval(a.value);return;case "changeDirection":g.Sa.Xc.call(this,a,g.za,g);break;case "changeSpeed":g.Sa.Yc.call(this,a,g);break;case "accel":g.Sa.Wc.call(this,
a,g);break;case "vanish":this.parent&&this.parent.removeChild(this)}g.mb=h;g.eb?g.eb.hc():this.Va&&this.Va()}}else this.parent&&this.parent.removeChild(this),g.mb=h,g.eb?g.eb.hc():this.Va&&this.Va()}b=b||"top";"string"===typeof b?g.Sc=this.zc.lc(b,a.rc):b instanceof n.La?g.Sc=b.lc(a.rc):(window.console.error(a,b),c(Error("\u5f15\u6570\u304c\u4e0d\u6b63")));g.Sa=this;g.za=a;g.vc=-1;g.mb=k;g.direction=0;g.oc=0;g.speed=0;g.pc=0;g.Pa=0;g.Qa=0;g.Ua=0;g.Ia=0;g.Gb=-1;g.gb=0;g.Wa=0;g.Hb=-1;g.kb=0;g.ib=0;
g.lb=0;g.jb=0;g.Eb=-1;g.mc=h;return g};n.Ka.prototype.Zc=function(a){function b(){this.x+=b.Fc;this.y+=b.Gc;a.nc(this)||(this.parent&&this.parent.removeChild(this),b.mb=h,b.eb?b.eb.hc():this.Va&&this.Va())}b.za=a;b.direction=0;b.speed=0;b.Fc=0;b.Gc=0;b.mc=h;return b};n.Ka.prototype.$c=function(a,f,g,H){var R={label:a.na.label},U;for(U in a.na.qa)R[U]=a.na.qa[U];R=f.Dc(R);if(R!==d){H=(U=0===a.na.la.length)?H.Zc(f):H.ic(f,a.na);var G=this,ha={x:this.x+a.qa.offsetX,y:this.y+a.qa.offsetY};g.oc=H.direction=
function(C){var H=eval(C.value)*q;switch(C.type){case "aim":return a.qa.$a?b(ha,f.target)+H:b(G,f.target)+H;case "absolute":return H-Math.PI/2;case "relative":return g.direction+H;default:return g.oc+H}}(a.direction||a.na.direction);g.pc=H.speed=function(a){var b=eval(a.value);switch(a.type){case "relative":case "sequence":return g.pc+b;default:return b}}(a.speed||a.na.speed);R.x=ha.x;R.y=ha.y;U&&(H.Fc=Math.cos(H.direction)*H.speed*f.Xa,H.Gc=Math.sin(H.direction)*H.speed*f.Xa);if(f.uc||R.uc)R.direction=
(H.direction+0.5*Math.PI)*Math.RAD_TO_DEG,R.speed=H.speed;R.update=H;this.parent!==j&&this.parent.addChild(R)}};n.Ka.prototype.Xc=function(f,p,g){var H=eval(f.direction.value)*q,R=eval(f.ra);switch(f.direction.type){case "aim":f=p.target;if(!f)return;g.Ia=b(this,f)+H;g.Ua=a(g.Ia-g.direction)/R;break;case "absolute":g.Ia=H-Math.PI/2;g.Ua=a(g.Ia-g.direction)/R;break;case "relative":g.Ia=g.direction+H;g.Ua=a(g.Ia-g.direction)/R;break;case "sequence":g.Ua=H,g.Ia=g.direction+g.Ua*R}g.Gb=this.fa+R};n.Ka.prototype.Yc=
function(a,b){var g=eval(a.speed.value),f=eval(a.ra);switch(a.speed.type){case "absolute":b.Wa=g;b.gb=(b.Wa-b.speed)/f;break;case "relative":b.Wa=g+b.speed;b.gb=(b.Wa-b.speed)/f;break;case "sequence":b.gb=g,b.Wa=b.speed+b.gb*f}b.Hb=this.fa+f};n.Ka.prototype.Wc=function(a,b){var g=eval(a.ra);b.Eb=this.fa+g;if(a.Ca){var f=eval(a.Ca.value);switch(a.Ca.type){case "absolute":case "sequence":b.kb=(f-b.Pa)/g;b.ib=f;break;case "relative":b.kb=f,b.ib=(f-b.Pa)*g}}else b.kb=0,b.ib=b.Pa;if(a.Da)switch(f=eval(a.Da.value),
a.Da.type){case "absolute":case "sequence":b.lb=(f-b.Qa)/g;b.jb=f;break;case "relative":b.lb=f,b.jb=(f-b.Qa)*g}else b.lb=0,b.jb=b.Qa};var f=180/Math.PI,q=Math.PI/180;n.Nd=function(){this.Sa=this;this.za=j;this.vc=-1;this.mb=k;this.Ia=this.Ua=this.Qa=this.Pa=this.pc=this.speed=this.oc=this.direction=0;this.Gb=-1;this.Wa=this.gb=0;this.Hb=-1;this.jb=this.lb=this.ib=this.kb=0;this.Eb=-1;this.mc=h}})();var ua=[6E3,8E3,16E3];function Fa(a,b){for(var f=[],q=[],m=0;600>m;m++){var p=new r(b);p.da=5;p.ea=1;p.Nb=0.2;p.update=function(){this.scaleX+=this.Nb;this.scaleY+=this.Nb;this.alpha*=0.9;0.0010>this.alpha&&(a.removeChild(this),q.push(this))};f.push(p);q.push(p)}this.Kb=function(b,f,m){for(var p=~~t(1,3);p--;){var G=q.pop();if(G===d)break;G.scaleX=G.scaleY=0;G.alpha=1;G.x=b+t(-0.2,0.2);G.y=f+t(-0.2,0.2);G.Nb=0.2*m;a.addChild(G)}};this.Ic=function(b,f,m){var p=q.pop();p!==d&&(p.scaleX=p.scaleY=0,p.alpha=0.6,p.x=b+t(-0.2,
0.2),p.y=f+t(-0.2,0.2),p.Nb=0.2*m,a.addChild(p))};this.ec=function(){for(var a=f.length;a--;)f[a].alpha=0};this.Kc=function(a){function f(){var q=new r(b);q.da=4;q.ea=1;q.radius=0;q.angle=0;q.update=function(){this.fa+=1;60>this.fa?this.visible=k:(this.visible=h,this.x=Math.cos(this.angle)*this.radius,this.y=Math.sin(this.angle)*this.radius,this.radius+=this.Ja,18>this.scaleX?(this.scaleX+=0.08,this.scaleY+=0.08):(this.Ja+=0.0020,this.alpha-=0.0060),0>this.alpha&&a.removeChild(this))};return q}for(var q=
[],m=0;50>m;m++)q.push(f());return function(b){function f(){m===q.length?b():setTimeout(f,5)}for(var m=0,p=q.length;p--;){var B=q[p];B.radius=t(0,0.5);B.angle=2*Math.PI/12*(p%12);B.Ja=t(0.02,0.05);B.alpha=1;B.scaleX=B.scaleY=0.5;B.fa=0;B.x=Math.cos(B.angle)*B.radius;B.y=Math.sin(B.angle)*B.radius;B.visible=k;B.qb=function(){m+=1};a.addChild(B)}Ga("bomb");f()}}};var La,Ma,Oa,Pa,Qa,Ra,Ta,Ua,Va=tm.createClass({superClass:tm.app.Label,init:function(a,b){this.superInit(a,b);this.setFontFamily("Orbitron")},draw:function(a){a.setText(this.fontStyle,this.align,this.baseline);a.fillText(this.text,0,0,this.width)}});La=function(a){var b=Va("",30),f=j;b.update=function(b){var m=0.25*Math.sin(0.1*b.frame)+0.75;this.alpha=0>a.y&&!a.disabled?(a.y+24+5)/30*m:m;b.score!==f&&(this.text="SCORE:"+~~b.score,f=b.score)};b.setBaseline("bottom");b.x=2;b.y=480;b.width=320;return b};
Ma=function(a){var b=Va("",10);b.setBaseline("bottom");b.width=320;b.x=4;b.y=448;var f=j;b.update=function(b){var m=0.25*Math.sin(0.1*b.frame)+0.75;this.alpha=0>a.y?(a.y+24+5)/30*m:m;b.Ba!==f&&(this.text="high score:"+~~b.Ba,f=b.Ba)};return b};Oa=function(){var a=Va("",12);a.setAlign("left");a.setBaseline("top");a.width=320;a.x=4;a.y=430;a.rotation=-90;var b=j;a.update=function(a){this.alpha=0.25*Math.sin(0.1*a.frame)+0.75;a.Ea!==b&&(this.text="LIFE:"+a.Ea,b=a.Ea)};return a};
Pa=function(){var a=Va("",12);a.setAlign("left");a.setBaseline("top");a.width=320;a.x=4;a.y=370;a.rotation=-90;var b=j;a.update=function(a){this.alpha=0.25*Math.sin(0.1*a.frame)+0.75;a.ma!==b&&(this.text="BOMB:"+a.ma,b=a.ma)};return a};Qa=function(){var a=Va("pause",12);a.setAlign("left");a.setBaseline("top");a.width=320;a.x=316;a.y=32;a.rotation=90;return a};
Ra=function(){var a=tm.app.Label("",50);a.setFontFamily("Orbitron");a.setAlign("center");a.setBaseline("middle");a.x=160;a.y=240;a.width=320;a.update=function(a){this.alpha=0.1+0.1*Math.sin(0.12*a.frame)};return a};Ta=function(){var a=Va("fps:",10);a.setBaseline("top");a.width=50;a.x=320-a.width;a.y=24;var b=-1,f=Date.now();a.update=function(a){this.alpha=0.25*Math.sin(0.1*a.frame)+0.75;b+=1;a=Date.now();1E3<=a-f&&(this.text="fps:"+b,f=a,b=0)}};
Ua=function(a){var b=tm.app.RectangleShape(300,5,{fillStyle:"white",strokeStyle:"none"});b.x=155;b.y=25;var f=j;b.update=function(b){this.visible&&a.Ha!==f&&(f=a.Ha,this.alpha=0.25*Math.sin(0.1*b.frame)+0.75,this.width=300*Math.max(1,a.Ob-a.Ha)/a.Ob,this.x=0.5*this.width+5,1>=this.width&&this.remove())};return b};var Wa,Xa,Ya,Za,$a,ab,bb;function u(a,b,f,q){a=this.label=tm.app.Label(a,b);a.fillStyle="#333";a.setFontFamily("Orbitron");a.setAlign("center");a.setBaseline("middle");a.width=320;a.x=f;a.y=q;a.addEventListener("enterframe",function(a){this.alpha=0.25*Math.sin(0.1*a.app.frame)+0.75});return a}
Wa=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();this.Ra=k;var a=tm.graphics.LinearGradient(0,0,0,320);a.addColorStopList([{offset:0,color:"rgba(0,0,255,0.3)"},{offset:1,color:"rgba(0,0,255,0.0)"}]);a=this.dc=tm.app.RectangleShape(320,480,{fillStyle:a.toStyle(),strokeStyle:"none"});a.x=160;a.y=240;a.blendMode="lighter";this.addChild(a);a=tm.graphics.LinearGradient(0,0,20,30);a.addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:0.5,color:"rgba(120,120,255,1.0)"},
{offset:1,color:"rgba(255,255,255,1.0)"}]);var b=this.title=tm.app.Label("GL-Shooter",35);b.fillStyle=a.toStyle();b.setFontFamily("Orbitron");b.setAlign("center");b.setBaseline("middle");b.width=320;b.x=160;b.y=100;b.alpha=0;this.addChild(b);a=this.version=tm.app.Label("version 1.5 beta",10);a.setFontFamily("Orbitron");a.setAlign("end");a.setBaseline("middle");a.width=320;a.x=270;a.y=120;a.alpha=0;this.addChild(a);this.$=[];a=this.$[0]=u("game start",20,160,320);this.addChild(a);a=this.$[1]=u("practice",
20,160,360);this.addChild(a);a=this.$[2]=u("setting",20,160,400);this.addChild(a);a=this.$[3]=u("exit",20,160,440);this.addChild(a);this.addEventListener("enter",function(){this.Ra=k;this.title.visible=h;this.version.visible=h;this.dc.visible=h;this.title.alpha=0;this.selection=this.version.alpha=0;this.$.forEach(function(a){a.visible=h})})},update:function(a){if(!this.Ra){a.keyboard.getKeyDown("down")?(this.selection+=1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&
(this.selection-=1,-1===this.selection&&(this.selection=this.$.length-1));var b=k;if(a.pointing.getPointingEnd()){var f=this.selection;if(a.pointing.getPointingEnd())for(var q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p,f===this.selection&&(b=h))}if(a.keyboard.getKeyDown("space")||a.keyboard.getKeyDown("z")||b)switch(this.selection){case 0:this.Ra=h;cb=1;db=3;a.rb=k;Ga("effect0");
break;case 1:a.pointing.button=0;a.pointing.update();a.pushScene(a.Fd);break;case 2:a.pointing.button=0;a.pointing.update();a.pushScene(a.Qc);break;case 3:a.cc=k,a.jc()}}for(p=this.$.length;p--;)this.$[p].fillStyle="#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff");this.Ra?(this.title.alpha-=0.01,this.version.alpha-=0.01,0>=this.title.alpha&&(this.title.visible=k,this.version.visible=k,this.dc.visible=k,this.$.forEach(function(a){a.visible=k}),a.pushScene(a.yd),a.zd())):(this.title.alpha+=
0.01,this.version.alpha+=0.01,1<this.title.alpha&&(this.title.alpha=1),1<this.version.alpha&&(this.version.alpha=1));a=tm.app.Sprite(32,32,tm.graphics.TextureManager.get("texture0"));a.setFrameIndex(12,64,64);a.dir=2*Math.random()*Math.PI;a.x=240*Math.cos(a.dir);a.y=240*Math.sin(a.dir);a.alpha=0;a.blendMode="lighter";var g=this;a.update=function(){this.alpha+=0.01;g.Ra?(this.x+=5*Math.cos(this.dir),this.y+=5*Math.sin(this.dir),this.scale.x+=0.03,this.scale.y+=0.03):(this.x-=1.2*Math.cos(this.dir),
this.y-=1.2*Math.sin(this.dir),this.scale.x+=0.01,this.scale.y+=0.01);var a=this.x*this.x+this.y*this.y;(2>a||57600<a)&&this.remove()};this.dc.addChild(a)}});
Xa=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();var a=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,0.7)",strokeStyle:"none"});a.x=160;a.y=240;this.addChild(a);a=u("pause",35,160,60);a.fillStyle="#ffffff";this.addChild(a);this.$=[];this.$[0]=u("resume",20,160,130);this.$[1]=u("restart stage",20,160,180);this.$[2]=u("setting",20,160,230);this.$[3]=u("back to title",20,160,280);for(a=this.$.length;a--;)this.addChild(this.$[a]);this.addEventListener("enter",function(){this.selection=
0})},update:function(a){a.keyboard.getKeyDown("down")?(this.selection+=1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&(this.selection-=1,-1===this.selection&&(this.selection=this.$.length-1));var b=k;if(a.pointing.getPointingEnd())for(var f=this.selection,q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p,f===this.selection&&(b=h));if(a.keyboard.getKeyDown("space")||
a.keyboard.getKeyDown("z")||b)switch(this.selection){case 0:a.popScene();break;case 1:a.pushScene(a.Ec);break;case 2:a.pointing.button=0;a.pointing.update();a.pushScene(a.Qc);break;case 3:a.pointing.button=0,a.pointing.update(),a.pushScene(a.Ec)}for(p=this.$.length;p--;)this.$[p].fillStyle="#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff")}});
Ya=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();var a=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,0.9)",strokeStyle:"none"});a.x=160;a.y=240;this.addChild(a);a=u("really?",35,160,60);a.fillStyle="#ffffff";this.addChild(a);this.$=[];this.$[0]=u("ok",20,160,230);this.$[1]=u("no",20,160,280);for(a=this.$.length;a--;)this.addChild(this.$[a]);this.addEventListener("enter",function(){this.selection=-1})},update:function(a){a.keyboard.getKeyDown("down")?(this.selection+=
1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&(this.selection-=1,-1===this.selection&&(this.selection=this.$.length-1));var b=k;if(a.pointing.getPointingEnd())for(var f=this.selection,q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p,f===this.selection&&(b=h));if(a.keyboard.getKeyDown("space")||a.keyboard.getKeyDown("z")||b)switch(this.selection){case 0:1===
a.Pb.selection?(a.Ta+=1,a.Rb(),a.sc(),a.popScene(),a.popScene()):3===a.Pb.selection&&(a.popScene(),a.popScene(),a.popScene(),a.pointing.button=0,a.pointing.update(),a.ga&&a.ga.stop());break;case 1:a.popScene()}for(p=this.$.length;p--;)this.$[p].fillStyle="#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff")}});
Za=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();var a=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,0.97)",strokeStyle:"none"});a.x=160;a.y=240;this.addChild(a);a=u("stage select",35,160,60);a.fillStyle="#ffffff";this.addChild(a);this.$=[];this.$[0]=u("stage 1",20,160,130);this.$[1]=u("stage 2",20,160,180);this.$[2]=u("stage 3",20,160,230);this.$[3]=u("back",20,160,280);for(a=this.$.length;a--;)this.$[a].setAlign("center"),this.addChild(this.$[a]);this.selection;
this.addEventListener("enter",function(){this.selection=-1});this.addEventListener("exit",da())},update:function(a){a.keyboard.getKeyDown("down")?(this.selection+=1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&(this.selection-=1,-1===this.selection&&(this.selection=this.$.length-1));var b=k;if(a.pointing.getPointingEnd())for(var f=this.selection,q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,
m)&&(this.selection=p,f===this.selection&&(b=h));if(a.keyboard.getKeyDown("space")||a.keyboard.getKeyDown("z")||b)switch(this.selection){case 0:db=cb=1;a.pointing.button=0;a.pointing.update();a.popScene();a.tc.Ra=h;a.rb=h;break;case 1:db=cb=2;a.pointing.button=0;a.pointing.update();a.popScene();a.tc.Ra=h;a.rb=h;break;case 2:db=cb=3;a.pointing.button=0;a.pointing.update();a.popScene();a.tc.Ra=h;a.rb=h;break;case 3:a.pointing.button=0,a.pointing.update(),a.popScene()}for(p=this.$.length;p--;)this.$[p].fillStyle=
"#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff")}});
$a=tm.createClass({superClass:tm.app.Scene,init:function(a){this.superInit();var b=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,0.97)",strokeStyle:"none"});b.x=160;b.y=240;this.addChild(b);b=u("setting",35,160,60);b.fillStyle="#ffffff";this.addChild(b);this.$=[];this.$[0]=u("bgm",20,60,130);this.$[1]=u("sound",20,60,180);this.$[2]=u("auto bomb",20,60,230);this.$[3]=u("back",20,60,280);for(b=this.$.length;b--;)this.$[b].setAlign("left"),this.addChild(this.$[b]);this.addEventListener("enter",
function(){this.selection=-1});this.Jb=function(b,q){switch(b){case 0:a.ja.bgm+=0.01*q;a.ja.bgm=Math.clamp(a.ja.bgm+0.01*q,0,1);a.ga&&(a.ga.volume=a.ja.bgm);break;case 1:a.ja.se=Math.clamp(a.ja.se+0.01*q,0,1)}};this.addEventListener("exit",function(){localStorage.setItem("jp.dev7.glshooter.settings",JSON.stringify(a.ja));a.Hd()})},update:function(a){a.keyboard.getKeyDown("down")?(this.selection+=1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&(this.selection-=1,
-1===this.selection&&(this.selection=this.$.length-1));a.keyboard.getKey("right")?this.Jb(this.selection,1):a.keyboard.getKey("left")&&this.Jb(this.selection,-1);if(a.keyboard.getKeyDown("right")||a.keyboard.getKeyDown("left"))switch(this.selection){case 2:a.ja.autoBomb=!a.ja.autoBomb}if(1===this.selection&&(a.keyboard.getKeyUp("right")||a.keyboard.getKeyUp("left")||a.pointing.getPointingEnd())){var b=tm.sound.WebAudioManager.get("explode");b.volume=a.ja.se;b.play()}b=k;if(a.pointing.getPointingEnd())for(var f=
this.selection,q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p,f===this.selection&&(b=h));if(a.keyboard.getKeyDown("space")||a.keyboard.getKeyDown("z")||b)switch(this.selection){case 0:case 1:160>q?this.Jb(this.selection,-1):this.Jb(this.selection,1);break;case 3:a.popScene(),a.pointing.button=0,a.pointing.update()}if(a.pointing.getPointingEnd()){if(tm.isMobile){q=320*a.pointing.x/
parseInt(a.element.style.width);m=320*a.pointing.y/parseInt(a.element.style.height);for(p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p)}switch(this.selection){case 2:a.ja.autoBomb=!a.ja.autoBomb}}for(p=this.$.length;p--;)this.$[p].fillStyle="#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff");this.$[0].text="bgm          "+~~(100*a.ja.bgm);this.$[1].text="sound      "+~~(100*a.ja.se);this.$[2].text="auto bomb  "+(a.ja.autoBomb?"ON":"OFF")}});
ab=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();var a=this.kc=tm.app.Label("Game Over",35);a.fillStyle="rgba(255,0,0,0.8)";a.setFontFamily("Orbitron");a.setAlign("center");a.setBaseline("middle");a.width=320;a.x=160;a.y=240;a.alpha=0;this.addChild(a);this.addEventListener("enter",function(a){this.start=a.app.frame})},update:function(a){this.kc.alpha+=0.01;if(1<this.kc.alpha){this.update=da();a.Ba=Math.max(a.score,a.Ba);var b=[];if(a.cc){b[b.length]="ALL STAGE CLEAR!";var f=
0;0===a.ub&&(b[b.length]="no bomb",f+=1);0===a.qc&&(b[b.length]="no miss",f+=1);0===a.Ta&&(b[b.length]="no continue",f+=1);b[b.length]="\u2606".repeat(f)}else b[b.length]="stage: "+a.ab,b[b.length]="continue: "+a.Ta;b="SCORE: {score} ({status})".format({score:~~a.Ba,status:b.join(" ")});console.log("entry 9leap",~~a.Ba,b);tm.social.Nineleap.postRanking(~~a.Ba,b)}}});
bb=tm.createClass({superClass:tm.app.Scene,init:function(){this.superInit();var a=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,0.1)",strokeStyle:"none"});a.x=160;a.y=240;this.addChild(a);a=u("continue?",35,160,120);a.fillStyle="#ffffff";this.addChild(a);this.$=[];this.$[0]=u("yes",20,160,230);this.$[1]=u("no",20,160,280);for(a=this.$.length;a--;)this.$[a].setAlign("center"),this.addChild(this.$[a]);this.selection;this.addEventListener("enter",function(){this.selection=0})},update:function(a){a.keyboard.getKeyDown("down")?
(this.selection+=1,this.selection===this.$.length&&(this.selection=0)):a.keyboard.getKeyDown("up")&&(this.selection-=1,-1===this.selection&&(this.selection=this.$.length-1));var b=k;if(a.pointing.getPointingEnd())for(var f=this.selection,q=320*a.pointing.x/parseInt(a.element.style.width),m=480*a.pointing.y/parseInt(a.element.style.height),p=this.$.length;p--;)this.$[p].isHitPointRect(q,m)&&(this.selection=p,f===this.selection&&(b=h));if(a.keyboard.getKeyDown("space")||a.keyboard.getKeyDown("z")||
b)switch(a.popScene(),this.selection){case 0:a.xd();return;case 1:a.jc();return}for(p=this.$.length;p--;)this.$[p].fillStyle="#333";this.$[this.selection]&&(this.$[this.selection].fillStyle="#fff")}});var v={},w=n.ba.action,z=n.ba.bd,A=n.ba.na,D=n.ba.cd,E=n.ba.ud,F=n.ba.dd,I=n.ba.ed,J=n.ba.Ld,O=n.ba.Jd,P=n.ba.repeat,S=n.ba.direction,T=n.ba.speed,eb=n.ba.offsetX;function V(a){return new n.Ka(new n.Xb(a))}function fb(a,b){return V({top:w([J(a+"+$rand*5"),F(S(20*b,"absolute"),1),I(T(4),5),J(60),I(T(0),10),J(10),E(S("$rand*10-5"),T("2.2+($rank*3-1)"),A()),J(2),P(4,[E(S(0,"sequence"),T("2.2+($rank*3-1)"),A()),J(2)]),F(S(160*b,"absolute"),1),I(T(4),40)])})}v.zako1=fb(0,1);v.zako1d=fb(40,1);
v.zako2=fb(0,-1);v.zako2d=fb(45,-1);v.zako3=V({top:w([J("$rand*5"),F(S(0,"aim"),1),I(T(4),40),J(20),P(3,[E(S("$rand*10-5"),T("2+($rank*3-1)"),A()),J(5)])])});v.zako4=V({top:w([J("$rand*20"),F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.2),30),J(30),z("attack"),I(T(-3),30)]),attack:w([J("5+$rand*20"),P(2,[E(S(-6,"aim"),T("1.4+($rank*3-1)"),A()),E(S(4,"sequence"),T("1.5+($rank*3-1)"),A()),E(S(4,"sequence"),T("1.6+($rank*3-1)"),A()),E(S(4,"sequence"),T("1.7+($rank*3-1)"),A()),J(90)])])});
v.zako4K=V({top:w([J("$rand*20"),F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.2),30),J(30),z("attack"),I(T(-3),30)]),attack:w([J("5+$rand*20"),P(2,[E(S(-6,"aim"),T("0.8+($rank*3-1)"),A()),E(S(4,"sequence"),T(0.1,"sequence"),A()),E(S(4,"sequence"),T(0.1,"sequence"),A()),E(S(4,"sequence"),T(0.1,"sequence"),A()),J(90)])])});
v.zako5=V({top:w([J("$rand*20"),F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.2),30),J(30),z("attack"),I(T(-3),30)]),attack:w([J("5+$rand*20"),P(2,[E(S("$rand*10-5"),T("2.2+($rank*3-1)"),A()),P(12,[J(3),E(S(0,"sequence"),T(0.2,"sequence"),A())]),J(80)])])});v.zako5K=V({top:w([J("$rand*20"),F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.2),30),J(30),z("attack"),I(T(-3),30)]),attack:w([J("5+$rand*20"),E(S(-22.5),T("0.6+($rank*3-1)"),A()),P(3,[E(S(15,"sequence"),T(0,"sequence"),A())]),J(80)])});
v.zako6=V({top:w([F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.3),30),J(45),z("attack"),I(T(-3),30)]),attack:w([P(8,z("firebit","$rand*360")),J(90),P(8,z("firebit","$rand*360")),J(90)]),firebit:w([E(S("$1","aim"),T("0.5+$rand"),D("bit","$1"))]),bit:A(w([J("10+$rank*3"),E(S("$1*-1","relative"),T("3.4+($rank*3-1)"),A()),O()]))});
v.zako6K=V({top:w([F(S(0,"absolute"),1),I(T(3),1),J("5+$rand*20"),I(T(0.3),30),J(45),z("attack"),I(T(-3),30)]),attack:w([P(8,z("firebit","$rand*360")),J(90),P(8,z("firebit","$rand*360")),J(90)]),firebit:w([E(S("$1","aim"),T("0.5+$rand"),D("bit","$1"))]),bit:A(w([J("10+$rank*3"),E(S("$1*-1","relative"),T("0.8+($rank*3-1)"),A("g")),O()]))});
v.zako7=V({top:w([J("5+$rand*60"),F(S("0","absolute"),1),J(5),F(S("$rand*10-5"),30),I(T("2.9+($rank*3-1)"),1),J(15),E(S("$rand*5-2.5"),T("3.4+($rank*3-1)"),A()),J(15),F(S(0),30),J(15),F(S(0),30)])});
v.zako7f=V({top:w([J("5+$rand*60"),F(S("0","absolute"),1),J(5),F(S("$rand*10-5"),30),I(T("2.9+($rank*3-1)"),1),J(5),E(S("$rand*5-2.5"),T("4.0+($rank*3-1)"),A()),J(5),E(S("$rand*5-2.5"),T("4.0+($rank*3-1)"),A()),J(5),E(S("$rand*5-2.5"),T("4.0+($rank*3-1)"),A()),F(S(0),30),J(15),F(S(0),30),J(15),F(S(0),30)])});
v.zako8=V({top1:w([F(S(0,"absolute"),1),I(T(5),1),J(20),I(T(-0.2),60),J(400),I(T(-5),30)]),top2:w([J(90),E(S(20,"absolute"),T("2.2+($rank*3-1)"),A()),P(50,[E(S(-0.5,"sequence"),T("2.2+($rank*3-1)"),A()),J(6)])]),top3:w([J(90),E(S(-20,"absolute"),T("2.2+($rank*3-1)"),A()),P(50,[E(S(0.5,"sequence"),T("2.2+($rank*3-1)"),A()),J(6)])])});function gb(a,b){return V({top:w([J("$rand*20"),F(S(0,"absolute"),1),I(T(4),1),J(a+"+$rand*15"),I(T(0.2),30),z("attack"),I(T(-4),30)]),attack:b})}
function hb(a){return gb(a,w([J(20),E(S("$rand*10-5"),T("2.2+($rank*3-1)"),A()),P(3,[J(30),E(S("$rand*10-5"),T("2.2+($rank*3-1)"),A())]),J(120)]))}v.zakoG1H=hb(0);v.zakoG1M=hb(35);v.zakoG1L=hb(70);function ib(a){return gb(a,w([J(20),P("1+$rank*0.4",[E(S("$rand*10-5"),T("2.2+($rank*3-1)"),A()),P(2,[J(3),E(S(0,"sequence"),T(0,"sequence"),A())]),J(40)]),J(60)]))}v.zakoG2H=ib(0);v.zakoG2M=ib(35);v.zakoG2L=ib(70);
function jb(a){return gb(a,w([J(20),P(2,[E(S("$rand*5-2.5"),T("2.2+($rank*3-1)"),A()),E(S(-30,"sequence"),T(0,"sequence"),A()),E(S(60,"sequence"),T(0,"sequence"),A()),J(60)]),J(60)]))}v.zakoG3H=jb(0);v.zakoG3M=jb(35);v.zakoG3L=jb(70);
v.bigger=V({top:w([F(S(0,"absolute"),1),I(T(2),1),J(30),F(S(90,"absolute"),1),I(T(0.2),1),z("attack"),P(30,[F(S(-90,"absolute"),1),z("attack"),z("attack"),F(S(90,"absolute"),1),z("attack"),z("attack")])]),attack:w([P(2,[P("1+$rank*5",[E(S(-30,"aim"),T("2+($rank*3-1)"),A()),E(S(20,"sequence"),T("2+($rank*3-1)"),A()),E(S(20,"sequence"),T("2+($rank*3-1)"),A()),E(S(20,"sequence"),T("2+($rank*3-1)"),A()),J(5)]),J(10),P("1+$rank*5",[E(S(-40,"aim"),T("2+($rank*3-1)"),A("g")),E(S(20,"sequence"),T("2+($rank*3-1)"),
A("g")),E(S(20,"sequence"),T("2+($rank*3-1)"),A("g")),E(S(20,"sequence"),T("2+($rank*3-1)"),A("g")),E(S(20,"sequence"),T("2+($rank*3-1)"),A("g")),J(5)]),J(10)])])});
v.bigger2=V({top:w([F(S(0,"absolute"),1),I(T(2),1),J(30),P(999,[F(S(90,"absolute"),1),I(T(0.6),1),J(60),F(S(-90,"absolute"),1),z("attack1",5),J(30),z("attack2",4),J(90),F(S(90,"absolute"),1),z("attack1",5),J(30),z("attack2",4),J(90),F(S(-90,"absolute"),1),z("attack1",7),J(30),z("attack2",6),J(90),F(S(90,"absolute"),1),z("attack1",9),J(30),z("attack2",8),J(90),F(S(-90,"absolute"),1),z("attack1",11),J(30),z("attack2",10),J(30),I(T(0),1),J(30),z("attack3")])]),attack1:w([E(S(-135,"absolute"),T(20),D("bit1",
"$1")),E(S(-45,"absolute"),T(20),D("bit1","$1")),E(S(45,"absolute"),T(20),D("bit1","$1")),E(S(135,"absolute"),T(20),D("bit1","$1"))]),attack2:w([E(S(-135,"absolute"),T(20),D("bit2","$1")),E(S(-45,"absolute"),T(20),D("bit2","$1")),E(S(45,"absolute"),T(20),D("bit2","$1")),E(S(135,"absolute"),T(20),D("bit2","$1"))]),bit1:A(w([J(1),I(T(0),1),E(S(-45,"aim"),T("3+($rank*3-1)"),A()),P(5,[P("$1",[E(S("90/$1","sequence"),T("3+($rank*3-1)"),A())]),J(2),E(S(-90,"sequence"),T("3+($rank*3-1)"),A())]),O()])),bit2:A(w([J(1),
I(T(0),1),E(S(-40,"aim"),T("3.5+($rank*3-1)"),A("g")),P(5,[P("$1",[E(S("80/$1","sequence"),T("3.5+($rank*3-1)"),A("g"))]),J(2),E(S(-80,"sequence"),T("3.5+($rank*3-1)"),A("g"))]),O()])),attack3:w([z("fire3r",14,1),z("fire3g",12,-1),z("fire3r",10,1),z("fire3g",8,-1)]),fire3r:w([E(S("$1*$2","absolute"),T("3+($rank*3-1)"),A("l")),P("360/$1-2",[P(3,[E(S(90,"sequence"),T(0,"sequence"),A("l"))]),J(3),E(S("90+$1*$2","sequence"),T(0,"sequence"),A("l"))]),P(3,[E(S(90,"sequence"),T(0,"sequence"),A("l"))])]),
fire3g:w([E(S("$1*$2","absolute"),T("3+($rank*3-1)"),A("l")),P("360/$1-2",[P(3,[E(S(90,"sequence"),T(0,"sequence"),A("lg"))]),J(3),E(S("90+$1*$2","sequence"),T(0,"sequence"),A("lg"))]),P(3,[E(S(90,"sequence"),T(0,"sequence"),A("lg"))])])});function qb(a,b){return V({top:w([J(a),F(S(b,"absolute"),1),I(T(0.5),1),J("60+$rand*100"),P(30,[E(T("1.5+($rank*3-1)"),A("lg")),J("60+$rand*100")])])})}
function W(a,b){return V({top1:w([J(a),F(S(b,"absolute"),1),I(T(0.8),1),J(180),F(S(0.5*b,"absolute"),60)]),top2:w([J(90),J("20+$rand*10"),P(30,[E(S("$rand*10-5"),T("1.5+($rank*3-1)"),A("lg")),J("120+(40-$rank*40)+$rand*10")])])})}v.tank1=qb(0,80);v.tank1d=qb(30,80);v.tank1dd=qb(60,80);v.tank2=qb(0,-80);v.tank2d=qb(30,-80);v.tank2dd=qb(60,-80);v.tank3R0=W(0,-80);v.tank3R1=W(30,-80);v.tank3R2=W(60,-80);v.tank3R3=W(90,-80);v.tank3R4=W(120,-80);v.tank3L0=W(0,80);v.tank3L1=W(30,80);v.tank3L2=W(60,80);
v.tank3L3=W(90,80);v.tank3L4=W(120,80);v.tank4R0=W(0,-150);v.tank4R1=W(30,-150);v.tank4R2=W(60,-150);v.tank4R3=W(90,-150);v.tank4R4=W(120,-150);v.tank4L0=W(0,150);v.tank4L1=W(30,150);v.tank4L2=W(60,150);v.tank4L3=W(90,150);v.tank4L4=W(120,150);
function rb(a,b){return V({top:w([J(a),F(S(b,"absolute"),1),I(T(0.8),1),J(140),F(S(12*b,"absolute"),60),P(2,[E(S(-90,"aim"),T(4),D("bit",110)),E(S(-90,"aim"),T(2),D("bit",90)),E(S(90,"aim"),T(2),D("bit",-90)),E(S(90,"aim"),T(4),D("bit",-110)),J(60)])]),bit:A(w([J(2),I(0,1),E(S("$1","relative"),T("2.1+($rank*3-1)"),A("g")),P("1+$rank*10",[J(1),E(S(0,"sequence"),T(0,"sequence"),A("g"))]),O()]))})}
v.middle=V({top:w([J(0),F(S(0,"absolute"),1),I(T(0.8),1),J(140),F(S(0,"absolute"),60),P(2,[E(S(-90,"aim"),T(4),D("bit",60)),E(S(-90,"aim"),T(2),D("bit",80)),E(S(90,"aim"),T(2),D("bit",-80)),E(S(90,"aim"),T(4),D("bit",-60)),J(60)])]),bit:A(w([J(2),I(0,1),E(S("$1","relative"),T("2.5+($rank*3-1)"),A("g")),P("1+$rank*10",[J(1),E(S(0,"sequence"),T(0,"sequence"),A("g"))]),O()]))});v.middle2L0=rb(0,5);v.middle2L1=rb(50,5);v.middle2L2=rb(100,5);v.middle2L3=rb(150,5);v.middle2L4=rb(200,5);
v.middle2R0=rb(0,-5);v.middle2R1=rb(50,-5);v.middle2R2=rb(100,-5);v.middle2R3=rb(150,-5);v.middle2R4=rb(200,-5);
function sb(a){return V({topmove:w([J(0),F(S(a,"absolute"),1),I(T(1.8),1),J(100),I(T(0.3),120),F(S(0,"absolute"),120),P(2,[E(S(-90,"aim"),T(4),D("bit",60)),E(S(-90,"aim"),T(2),D("bit",80)),E(S(90,"aim"),T(2),D("bit",-80)),E(S(90,"aim"),T(4),D("bit",-60)),J(60)])]),topattack:w(function(){var a=[];a[a.length]=J(150);for(var f=100;f--;)for(var q=0;360>q;q++){var m=60*Math.sin(2*q*Math.DEG_TO_RAD);10>q%30&&(a[a.length]=E(S(-90,"absolute"),T(5),D("bit",m,-1)),a[a.length]=E(S(90,"absolute"),T(5),D("bit",
m,1)));a[a.length]=J(1)}return a}),bit:A(w([J(3),I(0,1),E(S("$1*$2-15","absolute"),T("1.2+($rank*3-1)"),A()),E(S("$1*$2+15","absolute"),T("1.2+($rank*3-1)"),A()),O()]))})}v.middle3L0=sb(80);v.middle3R0=sb(-80);
v.middleKR=V({top:w([F(S(-90,"absolute"),1),I(T(4),1),J(5),I(T(0),70),J(70),F(S(-70,"absolute"),1),I(T(0.1),1),P(3,[P(5,[E(S(-90,"absolute"),T(1),D("bit",-1)),E(S(90,"absolute"),T(1),D("bit",1)),J(10)]),z("wshot",-84),z("wshot",-36),z("wshot",12),z("wshot",60),J(40),P(5,[E(S(-90,"absolute"),T(1),D("bit",-1)),E(S(90,"absolute"),T(1),D("bit",1)),J(10)]),z("wshot",-60),z("wshot",-12),z("wshot",36),J(40)])]),bit:A(w([J(5),F(S(-70,"absolute"),1),I(T(0.1),1),E(S("-2*$1","absolute"),T("0.001+$rank*0.01"),
D("greenAccel")),P(90/7,[J(5),E(S("7*$1","sequence"),T(0.1,"sequence"),D("greenAccel"))]),O()])),greenAccel:A(w([I(T("0.7+($rank*3-1)","relative"),300)])),wshot:w([E(S("$1"),T("1.1+($rank*3-1)"),A("b")),E(S(0,"sequence"),T(-0.1,"sequence"),A("b")),E(S(0,"sequence"),T(-0.1,"sequence"),A("b")),E(S(0,"sequence"),T(-0.1,"sequence"),A("b")),P(3,[E(S(8,"sequence"),T(0.3,"sequence"),A("b")),E(S(0,"sequence"),T(-0.1,"sequence"),A("b")),E(S(0,"sequence"),T(-0.1,"sequence"),A("b")),E(S(0,"sequence"),T(-0.1,
"sequence"),A("b"))])])});v.cannon=V({top1:w([J(100),P(100,[F(S(180,"relative"),600),P(30,[E(S(0,"relative"),T("1.0+($rank*3-1)"),A("g")),E(S(90,"sequence"),T("1.0+($rank*3-1)"),A("g")),E(S(90,"sequence"),T("1.0+($rank*3-1)"),A("g")),E(S(90,"sequence"),T("1.0+($rank*3-1)"),A("g")),J(20)])])]),top2:w([F(S(0,"absolute"),1),I(T(0.2),1)])});
v.cannon2=V({top1:w([J(100),P(100,[P(30,[F(S(90,"relative"),20),P(5,[E(S(0,"relative"),T("0.6+($rank*3-1)"),A("g")),E(S(120,"sequence"),T("0.6+($rank*3-1)"),A("g")),E(S(120,"sequence"),T("0.6+($rank*3-1)"),A("g")),J(2)]),J(30)])])]),top2:w([F(S(0,"absolute"),1),I(T(0.2),1)])});
v.cannon3=V({top1:w(z("attack",-1)),top2:w(z("attack",1)),attack:w([F(S(0,"absolute"),100),J(100),P(100,[F(S("10*$1","relative"),100),P(100/30,[E(S(0,"relative"),T("0.5+($rank*3-1)"),A("g")),E(S(90,"sequence"),T(0,"sequence"),A("g")),E(S(90,"sequence"),T(0,"sequence"),A("g")),E(S(90,"sequence"),T(0,"sequence"),A("g")),J(30)])])]),top3:w([F(S(0,"absolute"),1),I(T(0.2),1)])});
v.boss11=V({top:w([z("launch"),P(900,[z("attack1"),z("move2"),z("attack2"),z("move2"),z("attack3"),z("move2")])]),launch:w([F(S(0,"absolute"),1),I(T(3),1),J(15),I(T(-0.5),140),J(140),I(T(0),10)]),attack1:w([E(S(-125,"absolute"),T(4),D("bit1",-1,4)),E(S(-125,"absolute"),T(4),D("bit1",-1,4)),E(S(125,"absolute"),T(4),D("bit1",1,4)),E(S(125,"absolute"),T(4),D("bit1",1,4)),J(30),E(S(-125,"absolute"),T(4),D("bit1",1,2)),E(S(-125,"absolute"),T(4),D("bit1",1,2)),E(S(125,"absolute"),T(4),D("bit1",-1,2)),E(S(125,
"absolute"),T(4),D("bit1",-1,2)),J(34)]),bit1:A(w([J(12),I(0,1),E(S(0),T("0.5+($rank*3-1)"),A()),P("36*$2",[E(S("10*$1","sequence"),T(0.02,"sequence"),A()),J(2)]),O()])),move2:w([I(T(1),100),J(60),I(T(-1),100),J(66),I(T(0),100),J(100)]),attack2:w(function(){for(var a=[],b=0;8>b;b++)a.push(E(S(-125,"absolute"),T(4),D("bit2",10*b,0.3*b))),a.push(J(60-5*b)),a.push(E(S(125,"absolute"),T(4),D("bit2",-10*b,0.3*b))),a.push(J(60-5*b));return a}),bit2:A(w([J(12),I(0,1),P(3,[z("fire1","$1+-80","$2"),z("fire1",
"$1+-40","$2"),z("fire1","$1+  0","$2"),z("fire1","$1+ 40","$2"),z("fire1","$1+ 80","$2"),J(5)]),O()])),fire1:w([E(S("$1-10","absolute"),T("2+$rank+$2"),A()),P(4,[E(S(5,"sequence"),T(0,"sequence"),A())])]),attack3:w([E(S(-125,"absolute"),T(4),D("bit3",0)),E(S(125,"absolute"),T(4),D("bit3",50)),P(24,[E(S(0,"aim"),T("0.8+($rank*3-1)"),A("g"),eb(-3)),P(35,[E(S(10,"sequence"),T(0,"sequence"),A("g"),eb(-3))]),E(S(0,"aim"),T(0,"sequence"),A("g"),eb(3)),P(35,[E(S(10,"sequence"),T(0,"sequence"),A("g"),eb(3))]),
J(40)])]),bit3:A(w([J(12),I(T(0),1),J("$1"),P(12,[E(S("$rand*30-15"),A()),E(S(-5,"sequence"),A()),E(S(10,"sequence"),A()),J(100)]),O()]))});
v.boss12=V({top:w([F(S(0,"absolute"),1),z("move"),P(300,[z("attack4"),z("move"),z("attack1"),z("move"),z("attack2"),z("move")])]),move:w(I(T(1),100),J(60),I(T(-1),100),J(64),I(T(0),100),J(100)),attack1:w(E(T(0),D("bit10")),E(T(0),D("bit12")),J(1500)),bit10:A(w(P(120,w(E(S(-90,"absolute"),T(5),D("bit11")),E(S(-45,"absolute"),T(2.7),D("bit11")),E(S(45,"absolute"),T(2.7),D("bit11")),E(S(90,"absolute"),T(5),D("bit11")),J(10))),O())),bit11:A(w(J(12),I(T(0),1),E(S("$rand*10-5+ -150"),T("0.4+($rank*3-1)"),
A()),E(S("$rand*10-5+  -90"),T("0.4+($rank*3-1)"),A()),E(S("$rand*10-5+  -30"),T("0.4+($rank*3-1)"),A()),E(S("$rand*10-5+   30"),T("0.4+($rank*3-1)"),A()),E(S("$rand*10-5+   90"),T("0.4+($rank*3-1)"),A()),E(S("$rand*10-5+  150"),T("0.4+($rank*3-1)"),A()),O())),bit12:A(w(function(){var a=[];a.push(E(S(-125,"absolute"),T(4),D("bit13",1)));a.push(J(120));a.push(E(S(125,"absolute"),T(4),D("bit13",1)));a.push(J(120));for(var b=100;5<b;b-=10)a.push(E(S(-125,"absolute"),T(4),D("bit13",2))),a.push(J(b+5)),
a.push(E(S(125,"absolute"),T(4),D("bit13",2))),a.push(J(b));for(b=0;5>b;b++)a.push(E(S(-125,"absolute"),T(4),D("bit13",2))),a.push(J(5)),a.push(E(S(125,"absolute"),T(4),D("bit13",2))),a.push(J(5));a.push(O());return a})),bit13:A(w(J(12),I(T(0),1),E(S("$rand*4-2"),T("1.5+$rank+$1"),A("g")),P(20,w(J(1),E(S(0,"sequence"),T(0.3,"sequence"),A("g")))),O())),attack2:w(E(S(-90,"absolute"),T(5),D("bit21",1)),E(S(-125,"absolute"),T(4),D("bit20",-1)),E(S(125,"absolute"),T(4),D("bit20",1)),E(S(90,"absolute"),
T(5),D("bit21",-1)),J(800)),bit20:A(w(J(12),I(T(0),1),P(4,w(F(S("70*$1","relative"),"60+$rank*40"),P(70/9,w(E(S(0,"relative"),T("0.8+($rank*3-1)"),A()),E(S(90,"relative"),T("0.8+($rank*3-1)"),A()),E(S(180,"relative"),T("0.8+($rank*3-1)"),A()),E(S(270,"relative"),T("0.8+($rank*3-1)"),A()),J(9))),F(S("-70*$1","relative"),"60+$rank*40"),P(70/9,w(E(S(0,"relative"),T("0.8+($rank*3-1)"),A()),E(S(90,"relative"),T("0.8+($rank*3-1)"),A()),E(S(180,"relative"),T("0.8+($rank*3-1)"),A()),E(S(270,"relative"),T("0.8+($rank*3-1)"),
A()),J(9))))),O())),bit21:A(w(function(){var a=[];a.push(J(12));a.push(I(T(0),1));for(var b=-35;-10>b;b++){a.push(E(S(b+"*$1","aim"),T("2.4+($rank*3-1)"),A("g")));for(var f=0;3>f;f++)a.push(J(1)),a.push(E(S(0,"sequence"),T(0,"sequence"),A("g")));a.push(J(15))}a.push(O());return a})),attack4:w(E(S(-125,"absolute"),T(4),D("bit4",-1,180)),E(S(-125,"absolute"),T(4),D("bit4",-1,150)),E(S(-125,"absolute"),T(4),D("bit4",-1,120)),E(S(-125,"absolute"),T(4),D("bit4",-1,90)),E(S(125,"absolute"),T(4),D("bit4",
1,90)),E(S(125,"absolute"),T(4),D("bit4",1,120)),E(S(125,"absolute"),T(4),D("bit4",1,150)),E(S(125,"absolute"),T(4),D("bit4",1,180)),P(15,w(E(S(-125,"absolute"),T(4),D("bit42")),J(20),E(S(125,"absolute"),T(4),D("bit42")),J(20)))),bit4:A(w(J(12),I(T(0),1),F(S("$2*$1","absolute"),1),J(5),F(S("($2-100)*$1","absolute"),600),P(150,w(E(S(0,"relative"),T(5),A("g")),J(4))),O())),bit42:A(w(J(12),I(T(0),1),E(S("$rand*10-2"),T("0.8+($rank*3-1)"),A()),E(S(1,"sequence"),T(0,"sequence"),A()),E(S(1,"sequence"),
T(0,"sequence"),A()),O()))});
v.boss21=V({top:w(z("initPosition"),P(100,w(z("attack2"),z("attack3"),z("attack4")))),initPosition:w(F(S(158,"absolute"),1),I(T(0.6),1),J(5),E(S(0,"relative"),T(0.6),D("bit11")),E(S(0,"relative"),T(0.6),D("bit13")),J(500),I(T(0),60),J(60),F(S(0,"absolute"),1),J(120)),bit11:A(w(J(120),z("bit11Action",30,2,100),z("bit11Action",10,2,100),P(4,w(z("bit11Action","-60+$rand*90",0.8,80))),P(2,w(z("bit11Action","-60+$rand*90",0,80),z("bit11Action","-60+$rand*90",0.8,80))),O())),bit11Action:w(E(S(0,"absolute"),
D("bit12","$1","$3")),P(23,w(E(S(15,"sequence"),D("bit12","$1","$3")))),J("45*$2")),bit12:A(w(J("10+$rank*20"),E(S("155+$1","absolute"),T(1.7),D("blueC","$2")),O())),blueC:A(w(J("$1"),E(S(0),T("2+($rank*3-1)"),A("r")),O())),bit13:A(w(J(120),P(500/57,w(E(S(-25),T("1.5+($rank*3-1)"),A("g")),P(5,w(E(S(-2,"sequence"),T(0,"sequence"),A("g")))),P(5,w(E(S(-50,"sequence"),T("1.5+($rank*3-1)"),A("g")),P(5,w(E(S(-2,"sequence"),T(0,"sequence"),A("g")))))),J(57))),O())),attack2:w(E(T(0),D("bit21")),E(T(0),D("bit22")),
J(900)),bit21:A(w(P(8,w(E(S(-60),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),E(S(-10),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),E(S(40),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),J(65),E(S(-85),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),E(S(-35),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)",
"sequence"),T(0,"sequence"),A("g")))),E(S(15),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),E(S(65),T("1.8+($rank*3-1)"),A("g")),P(7,w(E(S("20/(6+$rank*2)","sequence"),T(0,"sequence"),A("g")))),J(65))),O())),bit22:A(w(J(20),E(S(-90,"absolute"),T(2),D("bit221")),J(60),E(S(90,"absolute"),T(2),D("bit221")),O())),bit221:A(w(J(30),I(T(0),1),P(8,w(E(S(-60),T(0),D("bullet22",0,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",5,"2.2+($rank*3-1)")),E(S(0,
"sequence"),T(0),D("bullet22",10,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",15,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",20,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",25,"2.2+($rank*3-1)")),P(8,w(E(S("120/(6+$rank*4)","sequence"),T(0),D("bullet22",0,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",5,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",10,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",15,"2.2+($rank*3-1)")),E(S(0,"sequence"),
T(0),D("bullet22",20,"2.2+($rank*3-1)")),E(S(0,"sequence"),T(0),D("bullet22",25,"2.2+($rank*3-1)")))),J(117))),O())),bullet22:A(w(J("$1"),I(T("$1*0.05+$2"),1))),attack3:w(function(){for(var a=[],b=0;30>b;b++)a[a.length]=E(S("-45-$rand*120","absolute"),T("1.5+$rand*6"),D("blue3alive",0.5*b)),a[a.length]=J(2),a[a.length]=E(S(" 45+$rand*120","absolute"),T("1.5+$rand*6"),D("blue3alive",0.5*b)),a[a.length]=J(2);a[a.length]=J(120);for(b=0;30>b;b++)a[a.length]=E(S("-45-$rand*120","absolute"),T("1.5+$rand*6"),
D("blue3alive",-0.5*b)),a[a.length]=J(2),a[a.length]=E(S(" 45+$rand*120","absolute"),T("1.5+$rand*6"),D("blue3alive",-0.5*b)),a[a.length]=J(2);a[a.length]=J(220);return a}),blue3alive:A(w(J("10+$rand*5"),I(T(0),20),J(180),E(S("$1-2","absolute"),T("4.5+($rank*3-1)"),A("b")),E(S("$1+2","absolute"),T("4.5+($rank*3-1)"),A("b")),E(S("$1-1","absolute"),T("4.5+($rank*3-1)"),A("b")),E(S("$1+1","absolute"),T("4.5+($rank*3-1)"),A("b")),E(S("$1","absolute"),T("4+($rank*3-1)"),A("b")),P(10,w(E(S(0,"sequence"),
T(0.2,"sequence"),A("b")))),O())),attack4:w(P(4,w(E(S(-125,"absolute"),T(4),D("bit40",-1)),E(S(125,"absolute"),T(4),D("bit40",1)),J(170))),J(100)),bit40:A(w(J(12),I(T(0),1),F(S("170*$1+$rand*10","relative"),"60+$rank*50"),P(14,w(E(S(0,"relative"),T("1.2+($rank*3-1)"),A()),E(S(90,"relative"),T("1.2+($rank*3-1)"),A()),E(S(180,"relative"),T("1.2+($rank*3-1)"),A()),E(S(270,"relative"),T("1.2+($rank*3-1)"),A()),J(5))),P(2,w(E(S("$rand*40-20"),T("1.2+($rank*3-1)"),A("g")),P(10,w(P(7,w(E(S(360/7,"sequence"),
T(0,"sequence"),A("g")))),J(1))))),F(S("-170*$1","relative"),"60+$rank*50"),P(14,w(E(S(0,"relative"),T("1.2+($rank*3-1)"),A()),E(S(90,"relative"),T("1.2+($rank*3-1)"),A()),E(S(180,"relative"),T("1.2+($rank*3-1)"),A()),E(S(270,"relative"),T("1.2+($rank*3-1)"),A()),J(5))),P(2,w(E(S("$rand*40-20"),T("1.2+($rank*3-1)"),A("g")),P(10,w(P(7,w(E(S(360/7,"sequence"),T(0,"sequence"),A("g")))),J(1))))),O()))});
v.boss22=V({top:w(J(60),P(100,w(z("attack1"),z("attack2")))),attack1:w(function(){var a=[];a[a.length]=F(S(90,"absolute"),1);a[a.length]=I(T(2),40);a[a.length]=J(20);a[a.length]=I(T(0),40);a[a.length]=J(20);for(var b=0;6>b;b++)a[a.length]=E(S(-115,"absolute"),T(10),D("bit1",0,-1,b)),a[a.length]=E(S(115,"absolute"),T(10),D("bit1",0,1,b)),a[a.length]=J(40),a[a.length]=I(T(b%2?2:-2),80),a[a.length]=J(40),a[a.length]=I(T(0),80),a[a.length]=J(40);a[a.length]=E(S(-115,"absolute"),T(10),D("bit1",0,-1,b));
a[a.length]=E(S(115,"absolute"),T(10),D("bit1",0,1,b));a[a.length]=J(40);a[a.length]=I(T(b%2?2:-2),40);a[a.length]=J(20);a[a.length]=I(T(0),40);a[a.length]=J(60);return a}),bit1:A(w(J(5),I(T(0),1),J("5+$1"),E(S("-120*$2"),T("1.0+$rank+$3*0.2"),A()),P("240 / (24-$rank*12)",w(E(S(30,"sequence"),T(0,"sequence"),A()),E(S("-30 + (24-$rank*12)*$2","sequence"),T(0,"sequence"),A()),J(1))),E(S("+120*$2"),T(0,"sequence"),A()),P("240 / (24-$rank*12)",w(E(S(30,"sequence"),T(0,"sequence"),A()),E(S("-30 + -(24-$rank*12)*$2",
"sequence"),T(0,"sequence"),A()),J(1))),O())),attack2:w(E(S(0),T(0),D("bithori")),E(S(0),T(0),D("bitvert")),J(1220)),bitvert:A(w(function(){for(var a=[],b=-15;15>b;b+=3)a[a.length]=z("fireBigBulletR",-80+b),a[a.length]=z("fireBigBulletR",-40+b),a[a.length]=z("fireBigBulletR",0+b),a[a.length]=z("fireBigBulletR",40+b),a[a.length]=z("fireBigBulletR",80+b),a[a.length]=J(50),a[a.length]=z("fireBigBulletR",-100+b),a[a.length]=z("fireBigBulletR",-60+b),a[a.length]=z("fireBigBulletR",-20+b),a[a.length]=z("fireBigBulletR",
20+b),a[a.length]=z("fireBigBulletR",60+b),a[a.length]=z("fireBigBulletR",100+b),a[a.length]=J(50);a[a.length]=O();return a})),bithori:A(w(z("fireBlueBit",33),z("fireBlueBit",44),z("fireBlueBit",55),z("fireBlueBit",66),z("fireBlueBit",77),z("fireBlueBit",88),O())),fireBlueBit:w(P(3,w(E(S(-90,"absolute"),T(8),D("blueBitalive","$1")),E(S(90,"absolute"),T(8),D("blueBitalive","$1")),J(40)))),blueBitalive:A(w(J(5),I(T(0),25),J(30),F(S(0,"absolute"),1),I(T(1.5),10),P(999,w(J("$1"),z("fireBigBulletG",-90),
z("fireBigBulletB",90))))),fireBigBulletR:w(E(S("$rand*90","absolute"),T(1),D("redBB","$1")),P(11,w(E(S(30,"sequence"),T(0,"sequence"),D("redBB","$1"))))),redBB:A(w(J(10),E(S("$1","absolute"),T("1+($rank*3-1)"),A()),O())),fireBigBulletG:w(E(S("$rand*90","absolute"),T(1),D("greenBB","$1")),P(11,w(E(S(30,"sequence"),T(0,"sequence"),D("greenBB","$1"))))),greenBB:A(w(J(10),E(S("$1","absolute"),T("1+($rank*3-1)"),A("g")),O())),fireBigBulletB:w(E(S("$rand*90","absolute"),T(1),D("blueBB","$1")),P(11,w(E(S(30,
"sequence"),T(0,"sequence"),D("blueBB","$1"))))),blueBB:A(w(J(10),E(S("$1","absolute"),T("1+($rank*3-1)"),A("b")),O()))});var Y=[function(a){return E(S(-112,"absolute"),T(68),a)},function(a){return E(S(-85,"absolute"),T(60),a)},function(a){return E(S(-68,"absolute"),T(52),a)},function(a){return E(S(68,"absolute"),T(52),a)},function(a){return E(S(85,"absolute"),T(60),a)},function(a){return E(S(112,"absolute"),T(68),a)}];
v.boss31=V({top:w(z("launch"),P(999,w(z("attack1"),z("attack3",-1),z("attack4"),z("attack1"),z("attack3",1),z("attack4"),J(1)))),launch:w(F(S(0,"absolute"),1),I(T(2),1),J(15),I(T(-0.5),140),J(140),I(T(0),10)),attack1:w(Y[0](D("bit11",1)),Y[5](D("bit11",-1)),J(3*(1080/11)),J(120)),bit11:A(w(J(1),I(T(0),1),E(S(0,"absolute"),T("1.0+($rank*3-1)"),A("l")),P(1080/11,w(E(S(90,"sequence"),T(0,"sequence"),A("l")),E(S(90,"sequence"),T(0,"sequence"),A("l")),E(S(90,"sequence"),T(0,"sequence"),A("l")),J(3),E(S("13*$1",
"sequence"),T(0,"sequence"),A("l")))),O())),attack3:w(F(S("30*$1","absolute"),1),J(1),I(T(1),60),Y[1](D("bit30","30*$1",-1)),Y[2](D("bit30","30*$1",-1)),Y[3](D("bit30","30*$1",1)),Y[4](D("bit30","30*$1",1)),J(150),I(T(0),60),J(150),Y[0](D("bit31","30*$1",-1)),Y[1](D("bit31","30*$1",-1)),Y[2](D("bit31","30*$1",-1)),Y[3](D("bit31","30*$1",1)),Y[4](D("bit31","30*$1",1)),Y[5](D("bit31","30*$1",1)),Y[0](D("bit32","30*$1")),Y[5](D("bit32","30*$1")),I(T(-0.25),60),J(600),I(T(0),60),J(150)),bit30:A(w(J(1),
I(T(0),1),J(1),F(S("$1","absolute"),1),I(T(1),60),J(1),P(30,w(E(S("($rand*40-20)-30*$2","absolute"),T("1+($rank*3-1)"),A()),J(5))),O())),bit31:A(w(J(1),I(T(0),1),J(1),F(S("$1","absolute"),1),I(T(-0.25),60),J(1),E(S(-60),T(8),A()),P(300,w(E(S(40,"sequence"),T(8),A()),E(S(40,"sequence"),T(8),A()),E(S(40,"sequence"),T(8),A()),E(S("-120+0.1*$2","sequence"),T(8),A()),J(2))),O())),bit32:A(w(J(1),I(T(0),1),J(1),F(S("$1","absolute"),1),I(T(-0.25),60),J(1),P(10,w(E(S("($rand*10-5)-40"),T("1.2+($rank*3-1)"),
A("g")),E(S(20,"sequence"),T(0,"sequence"),A("g")),E(S(20,"sequence"),T(0,"sequence"),A("g")),E(S(20,"sequence"),T(0,"sequence"),A("g")),E(S(20,"sequence"),T(0,"sequence"),A("g")),J(60))),O())),attack4:w(function(){for(var a=[],b=0;50>b;b++)0===b%7?(a[a.length]=Y[0](D("bit42",b,-1)),a[a.length]=Y[1](D("bit42",b,-1)),a[a.length]=Y[2](D("bit42",b,-1)),a[a.length]=Y[3](D("bit42",b,1)),a[a.length]=Y[4](D("bit42",b,1)),a[a.length]=Y[5](D("bit42",b,1))):(a[a.length]=Y[0](D("bit41",b,-1)),a[a.length]=Y[1](D("bit41",
b,-1)),a[a.length]=Y[2](D("bit41",b,-1)),a[a.length]=Y[3](D("bit41",b,1)),a[a.length]=Y[4](D("bit41",b,1)),a[a.length]=Y[5](D("bit41",b,1))),a[a.length]=J(5);a[a.length]=J(600);return a}),bit41:A(w(J(1),I(T(0),1),J(1),E(S("(60-$1)*$2"),T(5),D("blueVanish","$1")),J(1),O())),bit42:A(w(J(1),I(T(0),1),J(1),E(S("(60-$1)*$2"),T(5),D("blueBomb","$1")),J(1),O())),blueVanish:A(w(J("10+$1"),I(T(0),5),J(300),O())),blueBomb:A(w(J("10+$1"),I(T(0),5),J(300),E(S(0,"absolute"),T("0.2+($rank*3-1)"),A("sg")),P(19,
w(E(S(18,"sequence"),T(0,"sequence"),A("sg")))),O()))});
v.boss32=V({top:w(P(900,w(z("attack2",1),z("attack5"),z("attack6"),z("attack2",-1),z("attack5"),z("attack6"),J(1)))),attack2:w(function(){var a=[];a[a.length]=F(S(90,"absolute"),1);a[a.length]=I(T("-0.5*$1"),30);a[a.length]=J(105);for(var b=0;14>b;b++)0===b?a[a.length]=I(T(" 0.5*$1"),30):7===b&&(a[a.length]=I(T("-0.5*$1"),30)),a[a.length]=Y[1](D("bit21")),a[a.length]=Y[4](D("bit21")),a[a.length]=J(15),a[a.length]=Y[1](D("bit22")),a[a.length]=Y[4](D("bit22")),a[a.length]=J(15);a[a.length]=I(T(" 0.5*$1"),
30);a[a.length]=J(127.5);a[a.length]=I(T(0),1);a[a.length]=J(100);return a}),bit21:A(w(J(1),E(S(0,"absolute"),T("0.5+($rank*3-1)"),A("g")),P(23,w(E(S(15,"sequence"),T(0,"sequence"),A("g")))),O())),bit22:A(w(J(1),E(S(0,"absolute"),T("0.8+($rank*3-1)"),A("b")),P(23,w(E(S(15,"sequence"),T(0,"sequence"),A("b")))),O())),attack5:w(function(){for(var a=[],b=2;b--;)for(var f=0;360>f;f++){var q=60*Math.sin(3*f*Math.DEG_TO_RAD);4>f%27?(a[a.length]=Y[0](D("bit51",q,-1)),a[a.length]=Y[5](D("bit51",q,1))):8>f%
27?(a[a.length]=Y[1](D("bit51",q,-1)),a[a.length]=Y[4](D("bit51",q,1))):12>f%27&&(a[a.length]=Y[2](D("bit51",q,-1)),a[a.length]=Y[3](D("bit51",q,1)));a[a.length]=J(1)}return a}),bit51:A(w(J(1),I(0,1),E(S("$1*$2-15","absolute"),T("1.8+($rank*3-1)"),A()),E(S("$1*$2+15","absolute"),T("1.8+($rank*3-1)"),A()),O())),attack6:w(function(){for(var a=[],b=[1.5,0.5,0,0,0.5,1.5],f=0;12>f;f++)a[a.length]=Y[f%6](D(0===f%2?"bit61":"bit62",b[f%6])),a[a.length]=J(60);a[a.length]=J(120);for(f=0;6>f;f++)a[a.length]=
Y[f%6](D("bit62",b[f%6])),a[a.length]=J(30);for(f=0;6>f;f++)a[a.length]=Y[f%6](D("bit61",b[f%6])),a[a.length]=J(30);return a}),bit61:A(w(J(1),I(T(0),1),E(S(-40),T("2.2+($rank*3-1)+$1"),A("g")),P(4,w(P(10,w(E(S(8,"sequence"),T(0,"sequence"),A("g")))),J(3),E(S(-80,"sequence"),T(0,"sequence"),A("g")))),P(10,w(E(S(8,"sequence"),T(0,"sequence"),A("g")))),O())),bit62:A(w(J(1),I(T(0),1),E(S(-31.5),T("1.8+($rank*3-1)+$1"),A()),P(4,w(P(9,w(E(S(7,"sequence"),T(0,"sequence"),A()))),J(3),E(S(-63,"sequence"),
T(0,"sequence"),A()))),P(9,w(E(S(7,"sequence"),T(0,"sequence"),A()))),O()))});var tb={zako:{ta:20,ia:5,scale:1,score:100},zakoS:{ta:20,ia:5,scale:1,score:50},zakoL:{ta:23,ia:5,scale:1,score:50},tank:{ta:21,ia:5,scale:1,score:100},tankEx:{ta:21,ia:10,scale:1,score:100},bigger:{ta:23,ia:200,scale:4,score:1E3,clear:h},bigger2:{ta:23,ia:2E3,scale:5,score:1E3,clear:h},middle:{ta:22,ia:50,scale:2,score:800},middleK:{ta:22,ia:500,scale:4,score:1E3,clear:h},cannon:{ta:20,ia:50,scale:2,score:400},cannon2:{ta:20,ia:150,scale:3,score:400,clear:h},ship:{ta:24,ia:10,scale:2,score:200},
bigship:{ta:24,ia:500,scale:4,score:1E3,clear:h}};var ub=tm.isMobile,vb=0.2*0.2,wb={bgm1:"sounds/nc28689.mp3",bgm2:"sounds/nc784.mp3",bgm3:"sounds/nc52497.mp3"},cb=1,db=3;
tm.preload(function(){tm.util.FileManager.load("vs",{url:"shaders/shader.vs",type:"GET"});tm.util.FileManager.load("fs",{url:"shaders/shader.fs",type:"GET"});tm.graphics.TextureManager.add("texture0","images/texture0.png");tm.graphics.TextureManager.add("boss1","images/boss1.png");tm.graphics.TextureManager.add("boss2","images/boss2.png");tm.graphics.TextureManager.add("boss3","images/boss3.png");tm.sound.WebAudioManager.add("explode","sounds/se_maoudamashii_explosion05.mp3");tm.sound.WebAudioManager.add("effect0",
"sounds/effect0.mp3",1);tm.sound.WebAudioManager.add("bomb","sounds/nc17909.mp3");tm.sound.WebAudioManager.add("v-genBomb","sounds/voice_gen-bomb.mp3",1);tm.sound.WebAudioManager.add("v-extend","sounds/voice_extend.mp3",1)});function Ga(a){a=tm.sound.WebAudioManager.get(a);a!==d&&a.play()}function t(a,b){return Math.random()*(b-a)+a}
tm.main(function(){function a(){var a=new r(X);a.Wd=h;a.alpha=0.5;a.va=1;a.qb=function(){this.update=da();va.push(this)};a.Aa=function(a){this.ia-=a;0<this.ia||(C.removeChild(this),this.Ed())};a.Ed=function(){this.nb!==d&&(wa[this.nb]=h);this.clear===h&&ia(k);var a=(L.x-this.x)*(L.x-this.x)+(L.y-this.y)*(L.y-this.y)-(L.scaleX+this.scaleX),a=Math.clamp(a,0,4),a=Math.max(1,4*((4-a)/4));g.bb(this.score*a,h);if(this.clear!==h)xa(this.x,this.y,this.scaleX),0<ja||(Ga("explode"),ja=5);else{a=new r(X);a.da=
7;a.ea=7;a.x=this.x;a.y=this.y;var b=C.frame;a.update=function(){ia(k);0===C.frame%5&&0.7>Math.random()?(0>=ja&&(Ga("explode"),ja=5),xa(this.x+6*Math.random()-3,this.y+6*Math.random()-3,2)):C.frame>b+60&&C.removeChild(this)};C.addChild(a)}};return a}function b(){var a=new r(X);a.Zd=h;a.centerX=0;a.centerY=0;a.da=4;a.ea=1;a.radius=0;a.Ja=-0.01;a.angle=0;a.size=0.6;a.update=function(){this.x=this.centerX+Math.cos(this.angle)*this.radius;this.y=this.centerY+Math.sin(this.angle)*this.radius;this.angle+=
0.03;this.radius+=this.Ja;this.Ja-=0.0020;this.scaleX=this.scaleY=(17-this.radius)*this.size;this.alpha+=0<this.radius?0:-0.01;0.1>this.alpha&&(C.removeChild(this),Q.Oa+=1)};return a}function f(a,b,f){var g=ya.pop();if(g!==d){g.rotation=f;var m=Math.sin((90-f)*Math.DEG_TO_RAD),q=Math.cos((90-f)*Math.DEG_TO_RAD);g.update=function(){this.x+=1.3*q;this.y+=1.3*m;(-16.2>this.x||16.2<this.x||-24.2>this.y||24.2<this.y)&&C.removeChild(this)};g.x=N.x+a;g.y=N.y+b;g.Qb=N.Qb;C.addChild(g)}}window.document.getElementById("loading").style.display=
"none";var q={bgm:1,se:0.8,autoBomb:h};if(localStorage.getItem("jp.dev7.glshooter.settings")){var m=JSON.parse(localStorage.getItem("jp.dev7.glshooter.settings")),p;for(p in m)q[p]=m[p]}else localStorage.setItem("jp.dev7.glshooter.settings",JSON.stringify(q));var g=tm.app.CanvasApp("#tm");g.resize(320,480);g.fitWindow(k);g.background="rgba(0,0,0,1)";g.fps=60;g.Ta=0;g.Ba=0;g.score=0;g.rb=k;g.bb=function(a,b){var f=~~(g.score/24E5),m=~~(g.score/5E6);this.score+=a*(b?Ha:1);this.Ba=Math.max(this.score,
this.Ba);0<a&&(f!==~~(g.score/24E5)&&(g.ma+=1,Ga("v-genBomb")),m!==~~(g.score/5E6)&&(g.Ea+=1,Ga("v-extend")))};g.ja=q;g.Rb=function(){g.score=0;g.Ea=3;g.ma=3;L&&(L.ob=1)};g.ga=j;g.Rb();g.ab=cb;(g.Hd=function(){["explode","effect0","bomb","v-genBomb","v-extend"].forEach(function(a){tm.sound.WebAudioManager.get(a).volume=g.ja.se})})();var H=g.yd=tm.app.Scene(),m=document.getElementById("world");pa(m);var R=g.keyboard,U=tm.isMobile?g.pointing=g.mouse=tm.input.Touch(window):g.pointing=g.mouse=tm.input.Mouse(window);
U.Mc=-1;p=g.tc=Wa();g.Pb=Xa();g.Fd=Za(g);g.Qc=$a(g);g.Ec=Ya();var G=g.Qd=bb(),ha=g.Ud=ab();g.replaceScene(p);tm.util.FileManager.get("vs");tm.util.FileManager.get("fs");var C=new fa(m),m=C.Vd,Na={},B;for(B in tm.graphics.TextureManager.textures)Na[B]=qa(m,tm.graphics.TextureManager.get(B).element);var X=Na.texture0;B=tm.graphics.Canvas().resize(64,64);B.setFillStyle(tm.graphics.RadialGradient(32,32,0,32,32,32).addColorStopList([{offset:0,color:"rgba(200, 200, 255, 0.5)"},{offset:0.5,color:"rgba(200, 200, 255, 0.5)"},
{offset:1,color:"rgba(  0,   0, 255, 0.0)"}]).toStyle());B.fillCircle(32,32,32);r.Mb=B.element;var sa=new Fa(C,X),xa=g.Kb=sa.Kb,Sa=g.Ic=sa.Ic;sa.Kc(C);g.gd=sa.ec;var ka=[],N=new r(X);N._draw=function(a,b){if(this.visible){var f=b.globalCompositeOperation;b.globalCompositeOperation="source-over";var g=(this.x+16)*b.scale,m=(24-this.y)*b.scale,q=2*this.scaleX*b.scale,p=2*this.scaleY*b.scale;this.tb!=j&&(b.save(),b.globalAlpha=1,b.translate(g,m),b.rotate(this.rotation*Math.DEG_TO_RAD),b.drawImage(this.tb,
64*this.da,64*this.ea,64*this.sb,64*this.sb,0.5*-q,0.5*-p,q,p),0<this.va&&(q*=2,p*=2,b.globalAlpha=0.5*this.va,b.globalCompositeOperation="lighter",b.drawImage(r.Mb,0.5*-q,0.5*-p,q,p)),b.restore());b.globalCompositeOperation=f}};N.scaleX=N.scaleY=1.5;N.ob=1;N.reset=function(){this.x=0;this.y=-16;this.da=3;this.ha=this.va=0;this.speed=0.2;this.fb=k;this.Qb=1;this.pb=k};var Z=g.keyboard,Ia=0;N.update=function(){var a=this.ob;this.visible=this.disabled||this.pb?0===~~(C.frame/2)%2:h;this.fb&&(this.y+=
0.1,-16<this.y&&(this.disabled=this.fb=k,this.visible=h,Ia=C.frame));this.pb=C.frame<Ia+90;for(var b=0.25*(1-Math.abs(this.ha/3))+0.08,g=0;2>g;g++){var q=la.pop();q&&(q.x=this.x+0.1*Math.random()-0.05-b,q.y=this.y-1,q.alpha=0.8,q.scaleX=q.scaleY=0.8,C.addChild(q));if(q=la.pop())q.x=this.x+0.1*Math.random()-0.05+b,q.y=this.y-1,q.alpha=0.8,q.scaleX=q.scaleY=0.8,C.addChild(q)}b=this.ha;if(!this.disabled){var m=Z.getKey("x")||!Z.getKey("left")&&!Z.getKey("right")&&!Z.getKey("up")&&!Z.getKey("down");this.speed=
m?0.1:0.2;Z.getKey("left")?(this.x-=this.speed,this.ha-=0.2):Z.getKey("right")&&(this.x+=this.speed,this.ha+=0.2);Z.getKey("down")?this.y-=this.speed:Z.getKey("up")&&(this.y+=this.speed);U.getPointing()&&(m=k,g=U.deltaPosition.x,this.x+=0.1*g,this.y+=-0.1*U.deltaPosition.y,0>g?this.ha-=0.5:0<g&&(this.ha+=0.5));-16>this.x&&(this.x=-16);16<this.x&&(this.x=16);-24>this.y&&(this.y=-24);24<this.y&&(this.y=24)}b===this.ha&&(this.ha*=0.95);-3>this.ha?this.ha=-3:3<this.ha&&(this.ha=3);this.da=3+~~this.ha;
!this.disabled&&(0===C.frame%3&&!Z.getKey("c"))&&(m&&(f(-0.05,1.8,0),f(0,1.2,0),f(0.05,1.8,0)),b=Math.sin(0.1*C.frame),f(0.75*-b,1.4,0),f(0.5*-b,1.4,0),f(0.5*+b,1.4,0),f(0.75*+b,1.4,0),b=m?0:1,m=m?0:4,0===C.frame%6&&(2>a||f(+(b+1.2),0,2.1*m),1>a||f(+(b+0.8),0,1.4*m),f(+(b+0.4),0,0.7*m),f(-(b+0.4),0,-0.7*m),1>a||f(-(b+0.8),0,-1.4*m),2>a||f(-(b+1.2),0,-2.1*m)))};N.Aa=function(){this.Dd()};N.Dd=function(){g.qc+=1;g.Kb(this.x,this.y,2);Ga("explode");g.Ea-=1;0===g.Ea?(C.removeChild(this),this.fb=this.visible=
k,g.kd()):N.Nc()};N.Nc=function(){g.ma=Math.max(3,g.ma);2!==this.ob&&(this.ob+=1);this.x=0;this.y=-25;this.pb=this.fb=this.disabled=this.visible=h;this.ha=0;this.da=3};C.addChild(N);B=new r(X);B.x=N.x;B.y=N.y;B.da=2;B.ea=1;B.scaleX=B.scaleY=0.5;B.update=function(){this.x=N.x;this.y=N.y;this.visible=N.visible&&N.parent!==j;this.scaleX=this.scaleY=0.3+0.2*Math.sin(0.2*C.frame)};C.addChild(B);var za=[],la=[];for(B=0;200>B;B++)m=new r(X),m.da=4,m.ea=1,m.update=function(){this.y-=0.15;this.scaleX-=0.06;
this.scaleY-=0.06;this.alpha-=0.06;0>this.scaleX&&(C.removeChild(this),la.push(this))},za.push(m),la.push(m);var ya=[];for(B=0;400>B;B++)m=new r(X),m.scaleX=m.scaleY=1.5,m.Xd=h,m.da=7,m.ea=1,m.Qb=0,ka.push(m),ya.push(m),m.qb=function(){ya.push(this)};N.ec=function(){for(var a=za.length;a--;)za[a].alpha=0;for(a=ka.length;a--;)ka[a].y=100};var L=g.Pc=N;g.hd=L.ec;var $=0,Ha=1,Q=[];for(B=0;50>B;B++)Q.push(b());Q.Oa=Q.length;g.vd=function(a,b){for(var f=Q.length;f--;){Q.Oa-=1;var g=Q[f];g.centerX=a;g.centerY=
b;g.radius=16+6*Math.random();g.angle=2*Math.PI/12*(f%12);g.Ja=-0.01;g.alpha=1;g.size=0.6;C.addChild(g)}tm.sound.WebAudioManager.get("bomb").play()};g.Cc=function(a,b){for(var g=Q.length/2;g--;){Q.Oa-=1;var f=Q[g];f.centerX=a;f.centerY=b;f.radius=4;f.angle=2*Math.PI/12*(g%12);f.Ja=-0.16;f.alpha=0.3;f.size=0.3;C.addChild(f)}tm.sound.WebAudioManager.get("explode").play()};g.jd=function(){for(var a=Q.length;a--;)C.removeChild(Q[a]);Q.Oa=Q.length};var ma=[],Aa=[];for(B=0;2E3>B;B++)m=new r(X),m.Bd=h,m.da=
3,m.ea=1,m.scaleX=m.scaleY=0.6,ma.push(m),Aa.push(m),m.qb=function(){Aa.push(this)};var na=new n.Tc;na.target=L;na.rc=0.7;na.Dc=function(a){var b=Aa.pop();if(b!==d)return b.bc=k,b.Lc=k,b.scaleX=b.scaleY=0.8,a.label===j||a.label===d?(b.da=3,b.ea=1):"g"===a.label||0===a.label.indexOf("green")?(b.da=2,b.ea=1):"b"===a.label||0===a.label.indexOf("blue")?(b.da=1,b.ea=1):-1!==a.label.indexOf("bit")?(b.bc=h,b.Lc=h,b.da=7,b.ea=7):(b.da=3,b.ea=1),a.label&&-1!==a.label.indexOf("alive")&&(b.bc=h),"s"===a.label?
b.scaleX=b.scaleY=0.6:"sg"===a.label?(b.scaleX=b.scaleY=0.6,b.da=2,b.ea=1):"sb"===a.label&&(b.scaleX=b.scaleY=0.6,b.da=1,b.ea=1),"l"===a.label?b.scaleX=b.scaleY=1:"lg"===a.label?(b.scaleX=b.scaleY=1,b.da=2,b.ea=1):"lb"===a.label&&(b.scaleX=b.scaleY=1,b.da=1,b.ea=1),b};na.nc=function(a){return a.Bd&&!a.Lc?-16.5<a.x&&16.5>a.x&&-24.5<a.y&&24.5>a.y:-22.5<a.x&&22.5>a.x&&-30.5<a.y&&30.5>a.y};na.Xa=0.1;var ia=g.fc=function(a){for(var b=ma.length;b--;){var f=ma[b];if(f.parent!==j&&(!f.bc||a))xa(f.x,f.y,0.2),
C.removeChild(f)}},wa={},aa=[],va=[],ja=-1;for(B=0;1E3>B;B++)m=a(),aa.push(m),va.push(m);g.fd=function(){for(var a=aa.length;a--;){var b=aa[a];b.parent!==j&&C.removeChild(b)}};B=La(L);H.addChild(B);B=Ma(L);H.addChild(B);B=Oa();H.addChild(B);var M=g.message=Ra();B=Pa();H.addChild(B);Ta();var Ja=Qa();H.addChild(Ja);var kb,Ba=k,oa=0;H.update=function(){R.getKeyDown("space")&&!L.disabled&&g.pushScene(g.Pb);if(U.getPointingEnd()){var b=320*g.pointing.x/parseInt(g.element.style.width),f=480*g.pointing.y/
parseInt(g.element.style.height);Ja.isHitPointRect(b,f)&&g.pushScene(g.Pb)}Ba=k;ja--;b=lb.next(C.frame,wa);if(b!==d){for(var f=b.aa,m=f.length;m--;){var p=f[m],B=p[0],M=p[1],G=p[2],N=p[3],p=p[4],K=d;"boss"===G?(K=ga,K.alpha=1,K.va=0.5,H.addChild(kb)):(G=tb[G],K=va.pop(),K===d&&(K=a(),aa.push(K)),K.da=G.ta%8,K.ea=~~(G.ta/8),K.ia=G.ia,K.scaleX=K.scaleY=G.scale,K.score=G.score,K.clear=G.clear);K.x=B;K.y=M+8;wa[p]=k;K.nb=p;K.update=v[N].ic(na);C.addChild(K)}m=b.message;m!==d&&(p=g.message,p.text=m.text,
p.fillStyle=m.color,m.visible?H.addChild(p):p.remove())}B=Q.Oa!==Q.length;(L.fb||B)&&ia(k);if((R.getKeyDown("z")||U.Hc)&&L.parent!==j&&0<g.ma&&B===k){g.ma-=1;$=0;g.ub+=1;for(m=aa.length;m--;)p=aa[m],p.parent===j||(-17>p.x||17<p.x||-17>p.y||17<p.y)||p.Aa(20);ia(k);g.vd(L.x,L.y)}if(B===h)for(m=aa.length;m--;)p=aa[m],p.parent===j||(-17>p.x||17<p.x||-17>p.y||17<p.y)||p.Aa(1);b=L.x;f=L.y;for(N=aa.length;N--;)if(p=aa[N],p.parent!==j){G=(0.25*p.scaleX+1.5)*(0.25*p.scaleX+1.5);for(m=ka.length;m--&&!(K=ka[m],
K.parent!==j&&(M=(p.x-K.x)*(p.x-K.x)+(p.y-K.y)*(p.y-K.y),M<G&&($+=1,Ba=h,p.Aa(K.Qb),g.bb(0.01,h),K.update(),Sa(K.x,K.y,0.3),C.removeChild(K)),p.parent===j)););}if(L.parent!==j&&!L.pb&&!B&&!L.disabled)for(m=ma.length;m--;)if(p=ma[m],p.parent!==j)if(M=(p.x-b)*(p.x-b)+(p.y-f)*(p.y-f),M<vb){C.removeChild(p);$=0;1>g.ma||!q.autoBomb?L.Aa():(g.ma=0,g.Cc(L.x,L.y),g.ub+=1);break}else 1>M&&g.bb(4,h);if(L.parent!==j&&!L.pb&&!B&&!L.disabled)for(m=aa.length;m--;)p=aa[m],p.parent!==j&&(G=0.25*p.scaleX*0.25*p.scaleX,
M=(p.x-b)*(p.x-b)+(p.y-f)*(p.y-f),M<G&&($=0,1>g.ma||!q.autoBomb?L.Aa():(g.ma=0,g.Cc(L.x,L.y))));Ba?oa=0:(oa+=1,60<oa&&($-=12));$=Math.clamp($,0,1100);Ha=(1+0.012*$)*(1+0.012*$);L.va=0.0010*$;C._update();C._draw()};g.update=function(){U.Hc=k;U.getPointingEnd()&&(220>Date.now()-U.Mc?U.Hc=h:U.Mc=Date.now());g.currentScene!==H&&C.clear()};var ga,Ka,lb;g.zd=function(){g.cc=k;g.Ta=0;g.ab=cb;g.ub=0;g.qc=0;g.Rb();g.sc()};g.sc=function(){function a(b,f,g){f+=3;var m="L"===g?-20:20;return{frame:10,aa:[[m,b,
"tankEx","tank"+f+g+0],[m,b,"tankEx","tank"+f+g+1],[m,b,"tankEx","tank"+f+g+2],[m,b,"tankEx","tank"+f+g+3],[m,b,"tankEx","tank"+f+g+4]]}}function b(a,f,g){return{frame:10,aa:[[a-3,20,"zakoL","zakoG"+f+g],[a-1.5,20,"zakoL","zakoG"+f+g],[a,20,"zakoL","zakoG"+f+g],[a+1.5,20,"zakoL","zakoG"+f+g],[a+3,20,"zakoL","zakoG"+f+g]]}}function f(a){return{frame:10,aa:[[a,18,"ship","zako8"],[-a,18,"ship","zako8"]]}}function m(a){return{frame:10,aa:[[a+-3,19.5,"zako","zako7f"],[a+-1.5,19.5,"zako","zako7f"],[a+0,
19.5,"zako","zako7f"],[a+1.5,19.5,"zako","zako7f"],[a+3,19.5,"zako","zako7f"],[a+-3,18.5,"zako","zako7f"],[a+-1.5,18.5,"zako","zako7f"],[a+0,18.5,"zako","zako7f"],[a+1.5,18.5,"zako","zako7f"],[a+3,18.5,"zako","zako7f"],[a+-3,17.5,"zako","zako7f"],[a+-1.5,17.5,"zako","zako7f"],[a+0,17.5,"zako","zako7f"],[a+1.5,17.5,"zako","zako7f"],[a+3,17.5,"zako","zako7f"]]}}function p(a){return{frame:10,aa:[[a+-3,19.5,"zakoS","zako7"],[a+-1.5,19.5,"zakoS","zako7"],[a+0,19.5,"zakoS","zako7"],[a+1.5,19.5,"zakoS",
"zako7"],[a+3,19.5,"zakoS","zako7"],[a+-3,18.5,"zakoS","zako7"],[a+-1.5,18.5,"zakoS","zako7"],[a+0,18.5,"zakoS","zako7"],[a+1.5,18.5,"zakoS","zako7"],[a+3,18.5,"zakoS","zako7"],[a+-3,17.5,"zakoS","zako7"],[a+-1.5,17.5,"zakoS","zako7"],[a+0,17.5,"zakoS","zako7"],[a+1.5,17.5,"zakoS","zako7"],[a+3,17.5,"zakoS","zako7"]]}}function B(a){return{frame:10,aa:[[a+-3,17.5,"ship","zako6K"],[a+-1.5,17.5,"ship","zako6K"],[a+0,17.5,"ship","zako6K"],[a+1.5,17.5,"ship","zako6K"],[a+3,17.5,"ship","zako6K"]]}}function G(a){return{frame:10,
aa:[[a+-3,17.5,"ship","zako6"],[a+-1.5,17.5,"ship","zako6"],[a+0,17.5,"ship","zako6"],[a+1.5,17.5,"ship","zako6"],[a+3,17.5,"ship","zako6"]]}}function N(a){return{frame:10,aa:[[a+-3,17.5,"zako","zako5K"],[a+-1.5,17.5,"zako","zako5K"],[a+0,17.5,"zako","zako5K"],[a+1.5,17.5,"zako","zako5K"],[a+3,17.5,"zako","zako5K"]]}}function K(a){return{frame:10,aa:[[a+-3,17.5,"zako","zako5"],[a+-1.5,17.5,"zako","zako5"],[a+0,17.5,"zako","zako5"],[a+1.5,17.5,"zako","zako5"],[a+3,17.5,"zako","zako5"]]}}function R(a){return{frame:10,
aa:[[a+-3,17.5,"zako","zako4K"],[a+-1.5,17.5,"zako","zako4K"],[a+0,17.5,"zako","zako4K"],[a+1.5,17.5,"zako","zako4K"],[a+3,17.5,"zako","zako4K"]]}}function U(a){return{frame:10,aa:[[a+-3,17.5,"zako","zako4"],[a+-1.5,17.5,"zako","zako4"],[a+0,17.5,"zako","zako4"],[a+1.5,17.5,"zako","zako4"],[a+3,17.5,"zako","zako4"]]}}function s(a){return{frame:a,aa:[]}}C.frame=0;var Q=g.ab;if(!ub&&(g.ga&&g.ga.loaded&&g.ga.stop(),g.ga=tm.sound.Sound(wb["bgm"+Q]),g.ga)){var $=function(){g.ga.loaded?(g.ga.volume=q.bgm,
g.ga.loop=h,g.ga.play()):setTimeout($,100)};$()}if(ga!==d){C.removeChild(ga);var Z=aa.indexOf(ga);-1!==Z&&aa.splice(Z,1)}var X=sa.Kb,ca=new r(Na["boss"+Q]);ca.scaleX=ca.scaleY=3>Q?8:16;ca.sb=8;ca.alpha=1;ca.va=0.3;ca.Ob=ua[Q-1];ca.Ha=0;ca.Aa=function(a){this.Ha+=a;var b=this.parent;if(0.5*ca.Ob<this.Ha){g.fc(h);Ga("explode");X(this.x+t(-2,2),this.y+t(-2,2),t(1,2));X(this.x+t(-2,2),this.y+t(-2,2),t(1,2));X(this.x+t(-2,2),this.y+t(-2,2),t(1,2));var f=b.frame+50;this.update=function(){this.x+=0.02*Math.sin(0.3*
b.frame);f<b.frame&&(0===(b.frame-f)%5&&0.5>Math.random())&&(Ga("explode"),X(this.x+t(-3,3),this.y+t(-3,3),t(0.5,1)));if(b.frame===f+75){var a=0-this.x,g=12-this.y,m=b.frame;this.update=function(){this.x+=a/120;this.y+=g/120;m+120===b.frame&&(this.update=v["boss"+Q+"2"].ic(na))};this.Aa=this.md}};this.Aa=da()}};ca.md=function(a){this.Ha+=a;var b=this.parent;if(ca.Ob<this.Ha){g.Pc.disabled=h;g.fc(h);Ga("explode");X(this.x+t(-2,2),this.y+t(-2,2),t(1,2));X(this.x+t(-2,2),this.y+t(-2,2),t(1,2));X(this.x+
t(-2,2),this.y+t(-2,2),t(1,2));var f=b.frame+50,m=0-this.y;this.update=function(){g.Pc.disabled=h;this.va+=0.0010;this.nd+=0.0020;this.x+=0.02*Math.sin(0.3*b.frame);this.y+=m/310;this.scaleX-=0.0050;this.scaleY-=0.0050;this.rotation-=0.03;f<b.frame&&(0===(b.frame-f)%5&&0.5>Math.random())&&(Ga("explode"),X(this.x+t(-3,3),this.y+t(-3,3),t(0.5,1)));if(b.frame===f+250){var a=this;sa.Kc(b)(function(){a.Cd()})}else b.frame===f+250+60&&(this.update=function(){this.x+=0.02*Math.sin(0.3*b.frame);this.y+=m/
310;this.scaleX-=0.0030;this.scaleY-=0.0030;this.rotation-=0.03;this.alpha-=0.01;this.va-=0.01;0>=this.alpha&&b.removeChild(this)})};this.Aa=da()}};ga=ca;aa.push(ga);ga.Cd=function(){g.Id()};kb=Ua(ga);Ka&&Ka.remove();Ka=tm.app.RectangleShape(320,480,{fillStyle:"rgba(0,0,0,1)",strokeStyle:"rgba(0,0,0,0)"});H.addChild(Ka);var Z={frame:120,aa:[[-17,16,"zako","zako1"],[-15,16.5,"zako","zako1"],[-13,17,"zako","zako1"],[-11,17,"zako","zako1"],[-9,17,"zako","zako1"],[-17,16,"zako","zako1d"],[-15,16.5,"zako",
"zako1d"],[-13,17,"zako","zako1d"],[-11,17,"zako","zako1d"],[-9,17,"zako","zako1d"]]},ha={frame:120,aa:[[17,16,"zako","zako2"],[15,16.5,"zako","zako2"],[13,17,"zako","zako2"],[11,17,"zako","zako2"],[9,17,"zako","zako2"],[17,16,"zako","zako2d"],[15,16.5,"zako","zako2d"],[13,17,"zako","zako2d"],[11,17,"zako","zako2d"],[9,17,"zako","zako2d"]]},ja={frame:60,aa:[[-17,16,"zako","zako1"],[-15,16.5,"zako","zako1"],[-13,17,"zako","zako1"],[-11,17,"zako","zako1"],[-9,17,"zako","zako1"],[-17,16,"zako","zako1d"],
[-15,16.5,"zako","zako1d"],[-13,17,"zako","zako1d"],[-11,17,"zako","zako1d"],[-9,17,"zako","zako1d"]]},ka={frame:60,aa:[[17,16,"zako","zako2"],[15,16.5,"zako","zako2"],[13,17,"zako","zako2"],[11,17,"zako","zako2"],[9,17,"zako","zako2"],[17,16,"zako","zako2d"],[15,16.5,"zako","zako2d"],[13,17,"zako","zako2d"],[11,17,"zako","zako2d"],[9,17,"zako","zako2d"]]},ma={frame:60,aa:[[-17,16,"zako","zako1"],[-15,16.5,"zako","zako1"],[-13,17,"zako","zako1"],[-11,17,"zako","zako1"],[-9,17,"zako","zako1"],[-17,
16,"zako","zako1d"],[-15,16.5,"zako","zako1d"],[-13,17,"zako","zako1d"],[-11,17,"zako","zako1d"],[-9,17,"zako","zako1d"],[17,16,"zako","zako2"],[15,16.5,"zako","zako2"],[13,17,"zako","zako2"],[11,17,"zako","zako2"],[9,17,"zako","zako2"],[17,16,"zako","zako2d"],[15,16.5,"zako","zako2d"],[13,17,"zako","zako2d"],[11,17,"zako","zako2d"],[9,17,"zako","zako2d"]]},Ca={frame:5,aa:[[-8+4*Math.random()-2,17,"zako","zako3"]]},Da={frame:5,aa:[[8+4*Math.random()-2,17,"zako","zako3"]]},ba={frame:5,aa:[[-8+4*Math.random()-
2,17,"zako","zako3"],[8+4*Math.random()-2,17,"zako","zako3"]]},ia={frame:5,aa:[[-16.5,10,"tank","tank1"],[-16.5,8,"tank","tank1"],[-16.5,6,"tank","tank1"],[-16.5,4,"tank","tank1"],[-16.5,2,"tank","tank1"],[-16.5,10,"tank","tank1d"],[-16.5,8,"tank","tank1d"],[-16.5,6,"tank","tank1d"],[-16.5,4,"tank","tank1d"],[-16.5,2,"tank","tank1d"]]},la={frame:5,aa:[[16.5,10,"tank","tank2"],[16.5,8,"tank","tank2"],[16.5,6,"tank","tank2"],[16.5,4,"tank","tank2"],[16.5,2,"tank","tank2"],[16.5,10,"tank","tank2d"],
[16.5,8,"tank","tank2d"],[16.5,6,"tank","tank2d"],[16.5,4,"tank","tank2d"],[16.5,2,"tank","tank2d"]]},oa={frame:5,aa:[[-16.5,10,"tank","tank1"],[-16.5,8,"tank","tank1"],[-16.5,6,"tank","tank1"],[-16.5,4,"tank","tank1"],[-16.5,2,"tank","tank1"],[-16.5,10,"tank","tank1d"],[-16.5,8,"tank","tank1d"],[-16.5,6,"tank","tank1d"],[-16.5,4,"tank","tank1d"],[-16.5,2,"tank","tank1d"],[16.5,10,"tank","tank2"],[16.5,8,"tank","tank2"],[16.5,6,"tank","tank2"],[16.5,4,"tank","tank2"],[16.5,2,"tank","tank2"],[16.5,
10,"tank","tank2d"],[16.5,8,"tank","tank2d"],[16.5,6,"tank","tank2d"],[16.5,4,"tank","tank2d"],[16.5,2,"tank","tank2d"]]},va={frame:10,aa:[[0,18,"middle","middle"]]},wa={frame:10,aa:[[5,18,"middle","middle"]]},xa={frame:10,aa:[[-5,18,"middle","middle"]]},ya={frame:10,aa:[[20,10,"middleK","middleKR"]]},za={frame:10,aa:[[-7,20,"middle","middle2L0"],[-7,20,"middle","middle2L1"],[-7,20,"middle","middle2L2"],[-7,20,"middle","middle2L3"],[-7,20,"middle","middle2L4"],[7,20,"middle","middle2R0"],[7,20,"middle",
"middle2R1"],[7,20,"middle","middle2R2"],[7,20,"middle","middle2R3"],[7,20,"middle","middle2R4"]]},Aa={frame:10,aa:[[-20,20,"bigship","middle3L0"]]},Ba={frame:10,aa:[[20,20,"bigship","middle3R0"]]},Ha={frame:100,aa:[[0,17,"bigger","bigger","flag1"]]},Ia={nb:"flag1",aa:[]},Ja={frame:100,aa:[[0,17,"bigger2","bigger2","flag2"]]},Sa={nb:"flag2",aa:[]},mb={frame:10,aa:[[-7,19,"cannon","cannon"]]},xb={frame:10,aa:[[-2,19,"cannon","cannon"]]},yb={frame:10,aa:[[3,19,"cannon","cannon"]]},nb={frame:10,aa:[[7,
19,"cannon","cannon"]]},ob={frame:10,aa:[[-5,19,"cannon","cannon2"],[5,19,"cannon","cannon2"]]},zb={frame:10,aa:[[-8,19,"cannon","cannon2"],[8,19,"cannon","cannon2"]]},Ab={frame:10,aa:[[-12,19,"cannon2","cannon3"],[12,19,"cannon2","cannon3"]]},Ea;1===Q?Ea=[s(120),Z,ha,s(120),ja,s(60),ka,s(60),ma,s(120),Ca,Ca,Ca,Ca,Ca,s(60),Da,Da,Da,Da,Da,s(60),ba,ba,ba,ba,ba,s(60),Ha,Ia,la,ia,s(60),ba,ba,ba,ba,ba,s(60),mb,ba,ba,ba,ba,ba,s(20),va,wa,xa,s(120),mb,s(120),U(12),s(60),nb,s(60),U(12),s(120),U(0),s(60),
nb,K(-12),s(120),K(-12),s(120),K(-12),s(180),xb,yb,la,ia,G(8),s(120),G(-8),s(120),G(8),s(120),G(-8),s(120),{frame:10,aa:[],message:{color:"red",text:"WARNING!!",visible:h}},s(300),{frame:10,aa:[],message:{color:"white",text:"",visible:k}},{frame:20,aa:[[0,21.9,"boss","boss11"]]}]:2===Q?Ea=[s(240),p(8),s(120),p(-8),s(120),p(8),s(120),p(-8),s(120),s(60),p(8),s(60),p(8),s(60),p(8),s(60),p(8),s(60),p(8),s(60),p(8),s(60),p(8),s(60),s(60),f(4),s(60),f(8),s(60),f(12),s(60),s(180),N(-12),s(60),N(-12),s(60),
N(-12),ya,s(60),s(60),N(-12),s(60),N(-12),s(60),s(60),B(8),s(20),B(-8),s(20),N(12),s(60),N(12),s(60),ob,oa,s(120),Ab,R(12),s(40),R(12),s(40),K(12),s(40),K(12),s(40),R(-12),s(40),R(-12),s(40),s(360),p(0),s(60),p(1),s(60),p(2),s(60),p(3),s(60),G(-11),s(20),G(-13),s(20),K(9),s(60),K(12),s(60),s(120),{frame:10,aa:[],message:{color:"red",text:"WARNING!!",visible:h}},s(300),{frame:10,aa:[],message:{color:"white",text:"",visible:k}},{frame:20,aa:[[-12,-21.9,"boss","boss21"]]}]:3===Q&&(Ea=[s(240),b(7,2,"M"),
s(20),b(-7,2,"M"),s(20),s(20),b(7,2,"H"),s(20),b(-7,2,"H"),s(20),a(7,0,"R"),a(0,1,"R"),s(20),a(12,0,"L"),a(-5,1,"L"),b(3,2,"H"),s(20),s(20),b(-3,2,"H"),s(20),s(40),a(7,0,"R"),a(0,1,"R"),a(12,0,"L"),a(-5,1,"L"),b(-7,2,"H"),s(20),b(-2,2,"H"),s(20),b(7,2,"M"),s(20),b(10,2,"H"),s(20),b(-7,2,"M"),s(20),s(180),zb,s(40),oa,b(0,3,"H"),b(0,3,"H"),s(20),s(60),b(-7,3,"H"),b(-7,3,"H"),s(20),s(60),b(7,3,"H"),b(7,3,"H"),s(20),s(60),b(0,3,"M"),b(0,3,"M"),a(0,1,"R"),a(0,0,"L"),b(-7,3,"H"),b(7,3,"H"),a(0,0,"R"),a(0,
1,"L"),s(180),ob,s(60),b(7,2,"M"),s(20),b(-7,2,"M"),s(20),s(20),b(7,2,"H"),s(20),b(-7,2,"H"),s(20),a(7,0,"R"),a(0,1,"R"),s(20),a(12,0,"L"),a(-5,1,"L"),b(3,2,"H"),s(20),s(20),b(-3,2,"H"),s(20),s(40),a(7,0,"R"),a(0,1,"R"),a(12,0,"L"),a(-5,1,"L"),b(-7,2,"H"),s(20),b(-2,2,"H"),s(20),b(7,3,"M"),s(20),b(10,3,"H"),s(20),b(-7,3,"M"),s(20),s(180),za,s(120),b(-10,3,"H"),b(10,3,"H"),s(120),b(-10,3,"H"),b(10,3,"H"),s(120),b(-10,3,"H"),b(10,3,"H"),s(120),Ja,s(180),b(-7,1,"H"),s(180),b(7,1,"H"),s(180),b(-7,1,"H"),
s(180),Sa,m(12),s(60),m(4),s(60),m(0),s(60),m(-4),s(60),m(-12),s(60),m(12),s(60),a(1,1,"R"),a(-1,0,"R"),m(-12),s(60),a(-1,1,"L"),a(1,0,"L"),m(12),s(60),m(-12),s(60),m(12),s(60),s(120),Aa,s(120),Ba,s(120),a(13,1,"L"),a(13,0,"R"),b(0,3,"H"),s(60),b(-7,2,"H"),b(7,2,"H"),b(0,3,"M"),s(60),b(-7,2,"M"),b(-10,2,"M"),b(7,2,"M"),b(10,2,"M"),b(-3,3,"L"),b(3,3,"L"),s(360),{frame:10,aa:[],message:{color:"red",text:"WARNING!!",visible:h}},s(300),{frame:10,aa:[],message:{color:"white",text:"",visible:k}},{frame:20,
aa:[[0,21.9,"boss","boss31","boss3"]]}]);var ta=0,pb=0;Ea.next=function(a,b){var f;if(this[ta]!==d){if(pb+this[ta].frame===a)f=this[ta];else if(b[this[ta].nb]===h)f=this[ta];else return;ta++;pb=a;return f}};lb=Ea;L.reset();L.fb=h;L.disabled=h;L.y=-17;g.fc(h);g.fd();g.jd();g.gd();g.hd();M.text="stage "+Q;M.setFontSize(50);M.fillStyle="white";M.alpha=0.1;var Bb=C.frame;M.addEventListener("enterframe",function(){C.frame===Bb+240&&M.remove()});H.addChild(M)};g.Id=function(){if(g.ab===db)g.wd();else{M.fillStyle=
"white";M.setFontSize(30);M.alpha=0.1;M.text="stage clear";M.visible=h;var a=C.frame,b=~~(1E5*g.Ea+3E4*g.ma);M.addEventListener("enterframe",function(){C.frame===a+180?(M.text="bonus "+b,g.bb(b,k)):C.frame===a+360&&setTimeout(function(){g.ab+=1;g.sc()},10)});H.addChild(M)}};g.wd=function(){g.cc=h;M.fillStyle="white";M.setFontSize(30);M.text="";M.visible=h;var a=C.frame+5,b=~~(1E5*g.Ea+1E4*g.ma);M.addEventListener("enterframe",function(){g.rb?C.frame===a+0?M.text="stage clear":C.frame===a+180?(M.text=
"bonus "+b,g.bb(b,k)):C.frame===a+360&&(g.popScene(),g.ga&&g.ga.loaded&&g.ga.stop(),this.removeEventListener("enterframe",arguments.callee)):C.frame===a+0?M.text="all stage clear":C.frame===a+180?(M.text="bonus "+b,g.bb(b,k)):C.frame===a+360?(M.fillStyle="yellow",M.text="THANK YOU!!"):C.frame===a+540&&(g.jc(),this.removeEventListener("enterframe",arguments.callee))});H.addChild(M)};g.kd=function(){C.Gd=C.frame;setTimeout(function(){g.pushScene(G)},1E3)};g.xd=function(){g.Rb();g.Ta+=1;C.frame=C.Gd;
C.addChild(L);L.Nc()};g.jc=function(){g.ga&&g.ga.loaded&&g.ga.stop();g.replaceScene(ha)};g.run()});
